"use strict";(self.webpackChunklegion_solver=self.webpackChunklegion_solver||[]).push([[792],{365:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(314),r=n.n(o)()((function(e){return e[1]}));r.push([e.id,'body {\n    display: flex;\n    flex-direction: column;\n    font-family: \'Arial\', sans-serif;\n    margin: 0 auto;\n    padding: 20px;\n    min-height: 100vh;\n    background-color: #f5f5f5;\n    max-width: 1200px;\n}\n\nform {\n    margin-bottom: 0;\n}\n\n#title {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-top: 0;\n    color: #333;\n}\n\n#header {\n    display: flex;\n    justify-content: flex-end;\n}\n\n#subtitle {\n    text-align: center;\n    color: #666;\n    margin-bottom: 5px;\n}\n\n#legionBoard {\n    border-spacing: 0;\n    border-collapse: collapse;\n    box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n    background-color: white;\n}\n\n#legionBoard td.legionCell {\n    width: 25px;\n    height: 27px;\n    border-style: solid;\n    border-width: 1px;\n    transition: background-color 0.2s;\n}\n\n#legionWrapper {\n    display: flex;\n    justify-content: center;\n}\n\n#legion {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n#legionFooter {\n    margin-top: 10px;\n    width: 100%;\n}\n\n#options {\n    display: flex;\n    flex-direction: column;\n    text-align: end;\n}\n\n#checkboxes {\n    margin-bottom: 10px;\n}\n\n#darkModeLabel {\n    padding-top: 10px;\n}\n\n#iterationTime {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n}\n\n#iterations, #time, #resetButton {\n  visibility: hidden;\n}\n\n#boardFilled {\n    margin-bottom: 7px;\n}\n\n#currentCaracterCount {\n    margin-bottom: 7px;\n}\n\n#middlelabels {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n/* New Character Selection Panel Styles */\n#characterSelectionPanel {\n    margin-top: 25px;\n    padding: 15px;\n    background-color: #fff;\n    border-radius: 6px;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.08);\n}\n\n#characterSelectionPanel h2 {\n    text-align: center;\n    color: #333;\n    margin-top: 0;\n    margin-bottom: 12px;\n    font-size: 18px;\n}\n\n#classCategories {\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n    gap: 8px;\n    margin-bottom: 15px;\n}\n\n/* Styling for preset buttons */\n.presetBtn {\n    padding: 6px 12px;\n    background-color: #19a7c0;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-weight: 500;\n    font-size: 13px;\n    transition: all 0.2s;\n    border-bottom: 2px solid #4a6fa5;\n    margin: 0 5px;\n    min-width: 80px;\n}\n\n.presetBtn:hover {\n    background-color: #e8e8e8;\n}\n\n.presetBtn.active {\n    background-color: #4a6fa5;\n    color: white;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n/* Legacy category button styles - kept for reference */\n.categoryBtn {\n    padding: 6px 12px;\n    background-color: #f0f0f0;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-weight: 500;\n    font-size: 13px;\n    transition: all 0.2s;\n    border-bottom: 2px solid transparent;\n}\n\n/* Add class-specific colors to category buttons */\n.categoryBtn[data-category="warrior"] {\n    border-bottom: 2px solid #800000;\n}\n\n.categoryBtn[data-category="mage"] {\n    border-bottom: 2px solid #1e3a8a;\n}\n\n.categoryBtn[data-category="thief"] {\n    border-bottom: 2px solid #4b0082;\n}\n\n.categoryBtn[data-category="archer"] {\n    border-bottom: 2px solid #006400;\n}\n\n.categoryBtn[data-category="pirate"] {\n    border-bottom: 2px solid #5f9ea0;\n}\n\n.categoryBtn[data-category="special"] {\n    border-bottom: 2px solid #9370db;\n}\n\n.categoryBtn.active[data-category="warrior"] {\n    background-color: #800000;\n    color: white;\n}\n\n.categoryBtn.active[data-category="mage"] {\n    background-color: #1e3a8a;\n    color: white;\n}\n\n.categoryBtn.active[data-category="thief"] {\n    background-color: #4b0082;\n    color: white;\n}\n\n.categoryBtn.active[data-category="archer"] {\n    background-color: #006400;\n    color: white;\n}\n\n.categoryBtn.active[data-category="pirate"] {\n    background-color: #5f9ea0;\n    color: white;\n}\n\n.categoryBtn.active[data-category="special"] {\n    background-color: #9370db;\n    color: white;\n}\n\n.categoryBtn.active[data-category="all"] {\n    background-color: #4a6fa5;\n    color: white;\n}\n\n#characterSelector {\n    display: flex;\n    flex-direction: column;\n    gap: 15px;\n    margin-bottom: 20px;\n}\n\n/* Style for the container holding all characters - to be replaced */\n.all-characters-container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    gap: 10px;\n    margin-top: 15px;\n    width: 100%;\n}\n\n/* Style for the container with class sections */\n.character-sections-container {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    width: 100%;\n}\n\n/* Style for each class section */\n.character-section {\n    background-color: #ffffff;\n    border-radius: 5px;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.08);\n    overflow: hidden;\n    padding-bottom: 8px;\n    margin-bottom: 14px;\n    border: 1px solid #eaeaea;\n}\n\n/* Style for class section headers */\n.character-section-header {\n    font-size: 14px;\n    font-weight: 600;\n    padding: 7px 12px;\n    margin: 0 0 6px 0;\n    color: white;\n    background-color: #4A4A4A;\n    cursor: pointer;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    user-select: none;\n    border-radius: 4px 4px 0 0;\n}\n\n.character-section-header:hover {\n    opacity: 0.95;\n}\n\n.section-toggle {\n    font-size: 11px;\n    transition: transform 0.2s;\n}\n\n/* Class-specific header colors - more visually appealing */\n.character-section:has([data-class="warrior"]) .character-section-header {\n    background-color: #FF5252; /* Vibrant red for warriors */\n}\n\n.character-section:has([data-class="mage"]) .character-section-header {\n    background-color: #448AFF; /* Bright blue for mages */\n}\n\n.character-section:has([data-class="thief"]) .character-section-header {\n    background-color: #9C27B0; /* Vibrant purple for thieves */\n}\n\n.character-section:has([data-class="archer"]) .character-section-header {\n    background-color: #4CAF50; /* Fresh green for archers */\n}\n\n.character-section:has([data-class="pirate"]) .character-section-header {\n    background-color: #FF9800; /* Bright orange for pirates */\n}\n\n.character-section:has([data-class="special"]) .character-section-header {\n    background-color: #7986CB; /* Soft indigo for special classes */\n}\n\n/* Style for the character cards container within each section */\n.character-cards-container {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n    gap: 6px;\n    padding: 0 10px 8px 10px;\n}\n\n.class-section-header {\n    font-size: 14px;\n    font-weight: 600;\n    padding: 6px 10px;\n    margin-top: 5px;\n    border-radius: 4px;\n    color: white;\n    display: flex;\n    align-items: center;\n}\n\n.class-section-header::before {\n    content: \'\';\n    display: inline-block;\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background-color: rgba(255, 255, 255, 0.7);\n    margin-right: 8px;\n}\n\n.class-section {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\n    gap: 8px;\n    padding-bottom: 5px;\n}\n\n/* Class-specific headers */\n.class-section-header[data-class="warrior"] {\n    background-color: #800000; /* Burgundy red for warriors */\n}\n\n.class-section-header[data-class="mage"] {\n    background-color: #1e3a8a; /* Deep blue for mages/wizards */\n}\n\n.class-section-header[data-class="thief"] {\n    background-color: #4b0082; /* Purple for thieves */\n}\n\n.class-section-header[data-class="archer"] {\n    background-color: #006400; /* Dark green for archers */\n}\n\n.class-section-header[data-class="pirate"] {\n    background-color: #5f9ea0; /* Cadet blue for pirates */\n}\n\n.class-section-header[data-class="special"] {\n    background-color: #9370db; /* Medium purple for special classes */\n}\n\n/* Character card styling - more compact */\n.characterCard {\n    background-color: #fff;\n    border: 1px solid #e0e0e0;\n    border-radius: 4px;\n    padding: 6px 8px;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.2s;\n    display: flex;\n    flex-direction: column;\n    height: 42px;\n    justify-content: space-between;\n    box-shadow: 0 1px 2px rgba(0,0,0,0.05);\n}\n\n.characterCard:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n    border-color: #c0c0c0;\n}\n\n.characterCard.selected {\n    border-color: #4a6fa5;\n    background-color: #f0f7ff;\n    box-shadow: 0 1px 3px rgba(74, 111, 165, 0.25);\n}\n\n/* Class-based styling for character cards with light background colors */\n.characterCard[data-class="warrior"] {\n    background-color: rgba(128, 0, 0, 0.08);\n    border-left: 3px solid #800000; /* Burgundy red for warriors */\n}\n\n.characterCard[data-class="mage"] {\n    background-color: rgba(30, 58, 138, 0.08);\n    border-left: 3px solid #1e3a8a; /* Deep blue for mages/wizards */\n}\n\n.characterCard[data-class="thief"] {\n    background-color: rgba(75, 0, 130, 0.08);\n    border-left: 3px solid #4b0082; /* Purple for thieves */\n}\n\n.characterCard[data-class="archer"] {\n    background-color: rgba(0, 100, 0, 0.08);\n    border-left: 3px solid #006400; /* Dark green for archers */\n}\n\n.characterCard[data-class="pirate"] {\n    background-color: rgba(95, 158, 160, 0.08);\n    border-left: 3px solid #5f9ea0; /* Cadet blue for pirates */\n}\n\n.characterCard[data-class="special"] {\n    background-color: rgba(147, 112, 219, 0.08);\n    border-left: 3px solid #9370db; /* Medium purple for special classes */\n}\n\n.characterName {\n    font-weight: 600;\n    font-size: 12px;\n    margin-bottom: 2px;\n    color: #333;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.characterClass {\n    font-size: 11px;\n    color: #555;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 3px;\n    margin-bottom: 1px;\n}\n\n.effect-icon {\n    font-size: 12px;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    min-width: 16px;\n}\n\n.effect-text {\n    max-width: 86px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    font-size: 10px;\n    line-height: 1.2;\n}\n\n#characterInfo {\n    display: flex;\n    margin-top: 15px;\n    gap: 15px;\n}\n\n#selectedCharacterDetails, #pieceSelection {\n    flex: 1;\n    background-color: #f9f9f9;\n    padding: 12px;\n    border-radius: 5px;\n}\n\n#selectedCharacterDetails h3, #pieceSelection h3 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 16px;\n    color: #444;\n}\n\n#characterDetailsContent {\n    color: #666;\n    font-style: italic;\n}\n\n#pieceSelectionContent {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n}\n\n.selectedPiece {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 8px 10px;\n    margin-bottom: 6px;\n    background-color: white;\n    border-radius: 4px;\n    box-shadow: 0 1px 2px rgba(0,0,0,0.1);\n}\n\n.selectedPiece .selectedPieceInfo {\n    display: flex;\n    align-items: baseline;\n    gap: 8px;\n}\n\n.selectedPiece .characterName {\n    font-size: 13px;\n    font-weight: 600;\n    color: #333;\n}\n\n.selectedPiece .characterLevel {\n    font-size: 11px;\n    color: #666;\n}\n\n.selectedPiece[data-character-class="warrior"] {\n    background-color: rgba(128, 0, 0, 0.05);\n    border-left: 3px solid #800000; /* Burgundy red for warriors */\n}\n\n.selectedPiece[data-character-class="mage"] {\n    background-color: rgba(30, 58, 138, 0.05);\n    border-left: 3px solid #1e3a8a; /* Deep blue for mages/wizards */\n}\n\n.selectedPiece[data-character-class="thief"] {\n    background-color: rgba(75, 0, 130, 0.05);\n    border-left: 3px solid #4b0082; /* Purple for thieves */\n}\n\n.selectedPiece[data-character-class="archer"] {\n    background-color: rgba(0, 100, 0, 0.05);\n    border-left: 3px solid #006400; /* Dark green for archers */\n}\n\n.selectedPiece[data-character-class="pirate"] {\n    background-color: rgba(95, 158, 160, 0.05);\n    border-left: 3px solid #5f9ea0; /* Cadet blue for pirates */\n}\n\n.selectedPiece[data-character-class="special"] {\n    background-color: rgba(147, 112, 219, 0.05);\n    border-left: 3px solid #9370db; /* Medium purple for special classes */\n}\n\n.removePieceBtn {\n    background: none;\n    border: none;\n    font-size: 16px;\n    cursor: pointer;\n    color: #999;\n    padding: 2px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.2s;\n}\n\n.removePieceBtn:hover {\n    color: #e74c3c;\n}\n\nbutton {\n    padding: 8px 16px;\n    border: none;\n    border-radius: 4px;\n    background-color: #4a6fa5;\n    color: white;\n    cursor: pointer;\n    transition: background-color 0.2s;\n}\n\nbutton:hover {\n    background-color: #3d5d8a;\n}\n\n#clearPieces, #clearBoard, #resetButton {\n    background-color: #d32f2f;\n}\n\n#clearPieces:hover, #clearBoard:hover, #resetButton:hover {\n    background-color: #b71c1c;\n}\n\n#boardButton {\n    background-color: #2e7d32;\n}\n\n#boardButton:hover {\n    background-color: #1b5e20;\n}\n\n.centerMiddleChild {\n    display: flex;\n}\n\n.centerMiddleChild > :nth-child(1), .centerMiddleChild > :nth-child(3) {\n    flex: 1;\n}\n\n#instructions {\n    display: none;\n}\n\n#paragraph {\n    padding-right: 80px;\n}\n\n#currentPieces {\n    white-space: nowrap;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n    #legionWrapper {\n        flex-direction: column;\n        align-items: center;\n    }\n    \n    #instructions {\n        display: none;\n        margin-left: 0;\n        margin-top: 20px;\n    }\n    \n    #paragraph {\n        padding-right: 0;\n    }\n    \n    #characterInfo {\n        flex-direction: column;\n    }\n}\n\n/* Dark Mode Styles */\nbody.dark-mode {\n    background-color: #1a1a1a;\n    color: #e0e0e0;\n}\n\nbody.dark-mode #title, \nbody.dark-mode h2, \nbody.dark-mode h3 {\n    color: #f0f0f0;\n}\n\nbody.dark-mode #subtitle {\n    color: #aaa;\n}\n\nbody.dark-mode #legionBoard,\nbody.dark-mode #characterSelectionPanel,\nbody.dark-mode #selectedCharacterDetails, \nbody.dark-mode #pieceSelection {\n    background-color: #2a2a2a;\n}\n\nbody.dark-mode .presetBtn {\n    background-color: #333;\n    color: #ddd;\n}\n\nbody.dark-mode .presetBtn:hover {\n    background-color: #444;\n}\n\nbody.dark-mode .presetBtn.active {\n    background-color: #5d84c0;\n}\n\nbody.dark-mode .categoryBtn {\n    background-color: #333;\n    color: #ddd;\n}\n\nbody.dark-mode .categoryBtn:hover {\n    background-color: #444;\n}\n\nbody.dark-mode .categoryBtn.active {\n    background-color: #5d84c0;\n}\n\nbody.dark-mode .characterCard {\n    background-color: #2a2a2a;\n    border-color: #3a3a3a;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.2);\n}\n\nbody.dark-mode .characterCard:hover {\n    background-color: #333;\n    border-color: #444;\n}\n\nbody.dark-mode .characterName {\n    color: #e0e0e0;\n}\n\nbody.dark-mode .characterClass {\n    color: #aaa;\n}\n\nbody.dark-mode .character-section {\n    background-color: #222;\n    border-color: #333;\n}\n\nbody.dark-mode .character-section-header {\n    background-color: #333;\n}\n\n/* Adjust the colors slightly for dark mode */\nbody.dark-mode .character-section:has([data-class="warrior"]) .character-section-header {\n    background-color: #C62828; /* Darker red for dark mode */\n}\n\nbody.dark-mode .character-section:has([data-class="mage"]) .character-section-header {\n    background-color: #1976D2; /* Darker blue for dark mode */\n}\n\nbody.dark-mode .character-section:has([data-class="thief"]) .character-section-header {\n    background-color: #7B1FA2; /* Darker purple for dark mode */\n}\n\nbody.dark-mode .character-section:has([data-class="archer"]) .character-section-header {\n    background-color: #2E7D32; /* Darker green for dark mode */\n}\n\nbody.dark-mode .character-section:has([data-class="pirate"]) .character-section-header {\n    background-color: #E65100; /* Darker orange for dark mode */\n}\n\nbody.dark-mode .character-section:has([data-class="special"]) .character-section-header {\n    background-color: #5C6BC0; /* Darker indigo for dark mode */\n}\n\nbody.dark-mode .selectedPiece {\n    background-color: #333;\n    border: 1px solid #555;\n}\n\nbody.dark-mode #characterDetailsContent {\n    background-color: #222;\n}\n\n.characterDetailCard {\n    padding: 15px;\n    border-radius: 6px;\n    background-color: #f9f9f9;\n    box-shadow: 0 1px 4px rgba(0,0,0,0.1);\n    border-left: 3px solid #4a6fa5;\n}\n\n.characterDetailCard h4 {\n    margin: 0 0 12px 0;\n    font-size: 18px;\n    color: #333;\n}\n\n.characterDetailCard p {\n    margin: 6px 0;\n    line-height: 1.4;\n    color: #555;\n}\n\n/* Class-specific styles for the detail view */\n.characterDetailCard[data-class="warrior"] {\n    background-color: rgba(128, 0, 0, 0.05);\n    border-left: 3px solid #800000;\n}\n\n.characterDetailCard[data-class="mage"] {\n    background-color: rgba(30, 58, 138, 0.05);\n    border-left: 3px solid #1e3a8a;\n}\n\n.characterDetailCard[data-class="thief"] {\n    background-color: rgba(75, 0, 130, 0.05);\n    border-left: 3px solid #4b0082;\n}\n\n.characterDetailCard[data-class="archer"] {\n    background-color: rgba(0, 100, 0, 0.05);\n    border-left: 3px solid #006400;\n}\n\n.characterDetailCard[data-class="pirate"] {\n    background-color: rgba(95, 158, 160, 0.05);\n    border-left: 3px solid #5f9ea0;\n}\n\n.characterDetailCard[data-class="special"] {\n    background-color: rgba(147, 112, 219, 0.05);\n    border-left: 3px solid #9370db;\n}\n\n#addCharacterBtn {\n    display: block;\n    width: 100%;\n    margin-top: 15px;\n    padding: 8px;\n    background-color: #4a6fa5;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    font-weight: 500;\n    font-size: 13px;\n    cursor: pointer;\n    transition: background-color 0.2s;\n}\n\n#addCharacterBtn:hover {\n    background-color: #3d5d8a;\n}\n\n/* Level Selection Styles */\n.level-selection {\n    margin: 12px 0;\n    padding: 8px 10px;\n    background-color: rgba(0, 0, 0, 0.03);\n    border-radius: 4px;\n}\n\n.level-selection p {\n    margin-top: 0;\n    margin-bottom: 6px;\n    font-weight: 600;\n    font-size: 13px;\n    color: #444;\n}\n\n.level-options {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    gap: 4px;\n}\n\n.level-option {\n    flex: 1;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    padding: 4px 2px;\n    border-radius: 4px;\n    background-color: #f0f0f0;\n    border: 1px solid #ddd;\n    transition: all 0.2s;\n    font-size: 12px;\n    text-align: center;\n}\n\n.level-option:hover {\n    background-color: #e8e8e8;\n}\n\n.level-option input[type="radio"] {\n    margin-right: 2px;\n    transform: scale(0.8);\n}\n\n.level-option input[type="radio"]:checked + span {\n    font-weight: bold;\n    color: #4a6fa5;\n}\n\n.level-option:has(input[type="radio"]:checked) {\n    background-color: #e0e7f5;\n    border-color: #a0c0e0;\n}\n\n/* Piece Shape Visualization */\n.piece-preview {\n  display: inline-block;\n  margin-left: 5px;\n  vertical-align: middle;\n  transform: scale(0.9);\n}\n\n.piece-shape-visual {\n  margin: 5px 0;\n  display: inline-block;\n}\n\n/* Add the following classes for piece colors */\n.selectedPiece.piece-lvl60 {\n    border-left: 4px solid lightpink;\n}\n.selectedPiece.piece-lvl100 {\n    border-left: 4px solid lightcoral;\n}\n.selectedPiece.piece-lvl140-warrior-pirate {\n    border-left: 4px solid indianred;\n}\n.selectedPiece.piece-lvl140-mage-thief-archer {\n    border-left: 4px solid darkseagreen;\n}\n.selectedPiece.piece-lvl200-warrior {\n    border-left: 4px solid firebrick;\n}\n.selectedPiece.piece-lvl200-archer {\n    border-left: 4px solid mediumseagreen;\n}\n.selectedPiece.piece-lvl200-thief-lab {\n    border-left: 4px solid purple;\n}\n.selectedPiece.piece-lvl200-mage {\n    border-left: 4px solid dodgerblue;\n}\n.selectedPiece.piece-lvl200-pirate {\n    border-left: 4px solid lightsteelblue;\n}\n.selectedPiece.piece-lvl250-warrior {\n    border-left: 4px solid maroon;\n}\n.selectedPiece.piece-lvl250-archer {\n    border-left: 4px solid green;\n}\n.selectedPiece.piece-lvl250-thief {\n    border-left: 4px solid indigo;\n}\n.selectedPiece.piece-lvl250-mage {\n    border-left: 4px solid blue;\n}\n.selectedPiece.piece-lvl250-pirate {\n    border-left: 4px solid cadetblue;\n}\n.selectedPiece.piece-lvl250-xenon {\n    border-left: 4px solid mediumpurple;\n}\n.selectedPiece.piece-lab-enhanced {\n    border-left: 4px solid aquamarine;\n}\n\n.categoryBtn:hover {\n    background-color: #e8e8e8;\n}\n\n.filterContainer {\n    display: flex;\n    justify-content: center;\n    margin-bottom: 15px;\n}\n\nbody.dark-mode .characterCard.selected {\n    background-color: #3a3a3a;\n    border-color: #5d84c0;\n    box-shadow: 0 1px 3px rgba(0,0,0,0.3);\n}',""]);const a=r},143:(e,t,n)=>{var o=n(72),r=n.n(o),a=n(365);r()(a.A,{insert:"head",singleton:!1}),a.A.locals;const i={GMS:{title:"Legion Solver v2",instructions:"Instructions:",instructionsSub1:"1. Click the grid spaces you want to be filled, the region click will help you fill it in faster.",instructionsSub2:"2. Input the amount of each shape you want to be filled in the board.",instructionsSub3:"3. The space that the pieces take up should equal the amount of grid spaces you filled, although the program will still try to run otherwise.",instructionsSub4:"4. When you press Start the program will try to fill the board spaces with the pieces you've chosen, click on Live Solve if you want to see the board filled in real time.",spacesToBeFilled:"Spaces to be Filled: ",boardSpacesFilled:"Board Spaces Filled: ",currentCaracterCountFiled:"Number of Characters: ",iterations:"Iterations: ",time:"Time: ",bigClick:"Region Click",liveSolve:"Live Solve",darkMode:"Dark Mode",start:"Start",pause:"Pause",continue:"Continue",reset:"Reset",clearPieces:"Clear Pieces",clearBoard:"Clear Board",failText:"No Solution Found",lvl60:"Lvl 60",lvl100:"Lvl 100",warriorPirate140:"Lvl 140 Warrior/Pirate",mageThiefArcher140:"Lvl 140 Mage/Thief/Archer",warrior200:"Lvl 200 Warrior",archer200:"Lvl 200 Archer",thiefLab200:"Lvl 200 Thief/Lab",mage200:"Lvl 200 Mage",pirate200:"Lvl 200 Pirate",warrior250:"Lvl 250 Warrior",archer250:"Lvl 250 Archer",thief250:"Lvl 250 Thief/Ride or Die",mage250:"Lvl 250 Mage",pirate250:"Lvl 250 Pirate/Abyssal",xenon250:"Lvl 250 Xenon",enhancedLab200:"Lvl 200 Enhanced Lab",enhancedLab250:"Lvl 250 Enhanced Lab",lab250:"Lvl 250 Lab"},KMS:{title:"ìœ ë‹ˆì˜¨ ì§€ë„ ë©”ì´ì»¤",instructions:"ì„¤ëª…:",instructionsSub1:"1. ìœ ë‹ˆì˜¨ ì§€ë„ë¥¼ ë” ë¹¨ë¦¬ ì±„ìš°ë ¤ë©´ ì§€ì—­ì„ íƒ ë²„íŠ¼ì„ í™œì„±í™” í•œ í›„ ì§€ì—­ì„ ì„ íƒí•˜ì„¸ìš”.",instructionsSub2:"2. ìœ ë‹ˆì˜¨ ì§€ë„ì— ì±„ìš°ë ¤ëŠ” ì§ì—…ì˜ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”.",instructionsSub3:"3. ì‚°ì •ëœ ê³µê°„ì€ ì„ íƒëœ ê³µê°„ì˜ ì–‘ê³¼ ê°™ì•„ì•¼ í•˜ë©° ê°™ì§€ ì•Šë‹¤ë©´ í”„ë¡œê·¸ë¨ì€ ê³„ì† ë°˜ë³µ ì‹¤í–‰í•  ê²ë‹ˆë‹¤.",instructionsSub4:"4. í”„ë¡œê·¸ë¨ì´ ë£¨íŠ¸ë¥¼ ì°¾ê³  ìˆì„ ë•Œ í•´ë‹¹ ê³¼ì •ì„ ë³´ê³  ì‹¶ë‹¤ë©´ ì‹¤ì‹œê°„ ë³´ê¸°ë¥¼ í™œì„±í™”í•´ ì¤ë‹ˆë‹¤.",spacesToBeFilled:"ìœ ë‹ˆì˜¨ ìºë¦­í„° ì‚°ì •ëœ ê³µê°„: ",boardSpacesFilled:"ìœ ë‹ˆì˜¨ ì§€ë„ ì„ íƒëœ ê³µê°„: ",currentCaracterCountFiled:"í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ë¬¸ì ìˆ˜: ",iterations:"ë°˜ë³µíšŸìˆ˜: ",time:"ì†Œìš”ì‹œê°„: ",bigClick:"ì§€ì—­ì„ íƒ",liveSolve:"ì‹¤ì‹œê°„ ë³´ê¸°",darkMode:"ë‹¤í¬ëª¨ë“œ",start:"ì‹œì‘",pause:"Pause",continue:"Continue",reset:"ë¦¬ì…‹",clearPieces:"ìºë¦­í„° ì´ˆê¸°í™”",clearBoard:"ìœ ë‹ˆì˜¨ ì§€ë„ ì´ˆê¸°í™”",failText:"ë£¨íŠ¸ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.",lvl60:"Lvl 60",lvl100:"Lvl 100",warriorPirate140:"Lvl 140 ì „ì‚¬/í•´ì ",mageThiefArcher140:"Lvl 140 ë§ˆë²•ì‚¬/ë„ì /ê¶ìˆ˜/ë©”ì´í”ŒM(S)",warrior200:"Lvl 200 ì „ì‚¬",archer200:"Lvl 200 ê¶ìˆ˜/ë©”ì´í”ŒM(SS)",thiefLab200:"Lvl 200 ë„ì /ì œë…¼",mage200:"Lvl 200 ë§ˆë²•ì‚¬",pirate200:"Lvl 200 í•´ì ",warrior250:"Lvl 250 ì „ì‚¬",archer250:"Lvl 250 ê¶ìˆ˜",thief250:"Lvl 250 ë„ì ",mage250:"Lvl 250 ë§ˆë²•ì‚¬",pirate250:"Lvl 250 í•´ì ",xenon250:"Lvl 250 ì œë…¼",enhancedLab200:"Lvl 200 Enhanced Lab",enhancedLab250:"Lvl 250 Enhanced Lab",lab250:"Lvl 250 Lab"},JMS:{title:"ãƒ¦ãƒ‹ã‚ªãƒ³ãƒãƒƒãƒ—ãƒ¡ãƒ¼ã‚«ãƒ¼",instructions:"èª¬æ˜:",instructionsSub1:"1. ãƒ¦ãƒ‹ã‚ªãƒ³ãƒãƒƒãƒ—ã‚’ã‚‚ã£ã¨æ—©ãåŸ‹ã‚ã‚‹ãŸã‚ã«ã¯åœ°åŸŸé¸æŠã®ãƒœã‚¿ãƒ³ã‚’æ´»æ€§åŒ–ã—ã¦ã‹ã‚‰åœ°åŸŸã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚",instructionsSub2:"2. ãƒ¦ãƒ‹ã‚ªãƒ³ãƒãƒƒãƒ—ã«åŸ‹ã‚ã‚ˆã†ã¨ã™ã‚‹è·æ¥­ã®æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",instructionsSub3:"3. ç®—å®šã•ã‚ŒãŸç©ºé–“ã¯é¸æŠã•ã‚ŒãŸç©ºé–“ã®é‡ã¨åŒã˜ã§ãªã‘ã‚Œã°ãªã‚‰ãšã€åŒã˜ã§ãªã‘ã‚Œã°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ç¹°ã‚Šè¿”ã—ã¾ã™ã€‚",instructionsSub4:"4. ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒãƒ«ãƒ¼ãƒˆã‚’æ¢ã—ã¦ã„ã‚‹ã¨ãã«ãã®çŠ¶æ³ã‚’è¦‹ãŸã„ãªã‚‰ã€å®Ÿæ™‚é–“è¦‹ã‚‹ãƒœã‚¿ãƒ³ã‚’æ´»æ€§åŒ–ã—ã¦ãã ã•ã„ã€‚",spacesToBeFilled:"ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ç®—å®šã•ã‚ŒãŸç©ºé–“: ",boardSpacesFilled:"ãƒãƒƒãƒ—ã®é¸æŠã•ã‚ŒãŸç©ºé–“: ",currentCaracterCountFiled:"ç¾åœ¨ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹å½¹å‰²ã®æ•°: ",iterations:"ç¹°ã‚Šè¿”ã—ãŸæ•°: ",time:"æ‰€è¦æ™‚é–“: ",bigClick:"åœ°åŸŸé¸æŠ",liveSolve:"å®Ÿæ™‚é–“è¦‹ã‚‹",darkMode:"ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰",start:"ã‚¹ã‚¿ãƒ¼ãƒˆ",pause:"ãƒãƒ¼ã‚º",continue:"ã‚³ãƒ³ãƒ†ã‚£ãƒ‹ãƒ¥ãƒ¼",reset:"ãƒªã‚»ãƒƒãƒˆ",clearPieces:"ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åˆæœŸåŒ–",clearBoard:"ãƒãƒƒãƒ—åˆæœŸåŒ–",failText:"ãƒ«ãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ",lvl60:"Lvl 60",lvl100:"Lvl 100",warriorPirate140:"Lvl 140 æˆ¦å£«/æµ·è³Š",mageThiefArcher140:"Lvl 140 é­”æ³•ä½¿ã„/ç›—è³Š/å¼“",warrior200:"Lvl 200 æˆ¦å£«",archer200:"Lvl 200 å¼“",thiefLab200:"Lvl 200 ç›—è³Š/ã‚¼ãƒãƒ³",mage200:"Lvl 200 é­”æ³•ä½¿ã„",pirate200:"Lvl 200 æµ·è³Š",warrior250:"Lvl 250 æˆ¦å£«",archer250:"Lvl 250 å¼“",thief250:"Lvl 250 ç›—è³Š",mage250:"Lvl 250 é­”æ³•ä½¿ã„",pirate250:"Lvl 250 æµ·è³Š",xenon250:"Lvl 250 ã‚¼ãƒãƒ³",enhancedLab200:"Lvl 200 Enhanced Lab",enhancedLab250:"Lvl 250 Enhanced Lab",lab250:"Lvl 250 Lab"},TMS:{title:"è¯ç›Ÿæˆ°åœ°æ’åºå·¥å…·",instructions:"èªªæ˜:",instructionsSub1:"1. é»é¸ä½ æ‰€éœ€è¦çš„æ ¼å­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å€å¡Šé¸æ“‡ä»¥ç›´æ¥é¸å–æ•´å€‹å€å¡Šã€‚",instructionsSub2:"2. è¼¸å…¥ä½ æ“æœ‰çš„æ‹¼åœ–æ•¸é‡ã€‚",instructionsSub3:"3. ç¢ºèªå¯ä½¿ç”¨å€å¡Šæ•¸åŠå¯å¡«å…¥å€å¡Šæ•¸ç›¸ç­‰ï¼Œå¦å‰‡ç¨‹å¼å°‡æœƒç„¡é™å¾ªç’°ã€‚",instructionsSub4:"4. é»æ“Šé–‹å§‹ç¨‹å¼å°‡ä½¿ç”¨ä½ è¼¸å…¥çš„æ‹¼åœ–å¡«æ»¿å€å¡Šï¼Œé»æ“Šè§€çœ‹éç¨‹å¯ä»¥è§€çœ‹ç¨‹å¼è¨ˆç®—çš„éç¨‹ã€‚",spacesToBeFilled:"å¯å¡«å…¥å€å¡Šæ•¸: ",boardSpacesFilled:"å¯ä½¿ç”¨å€å¡Šæ•¸: ",currentCaracterCountFiled:"ç•¶å‰ä½¿ç”¨çš„è§’è‰²æ•¸é‡: ",iterations:"å˜—è©¦æ¬¡æ•¸: ",time:"èŠ±è²»æ™‚é–“: ",bigClick:"å€å¡Šé¸æ“‡",liveSolve:"è§€çœ‹éç¨‹",darkMode:"æ·±è‰²æ¨¡å¼",start:"é–‹å§‹",pause:"æš«åœ",continue:"ç¹¼çºŒ",reset:"é‡ç½®",clearPieces:"æ¸…é™¤æ“æœ‰çš„æ‹¼åœ–",clearBoard:"æ¸…é™¤é¢æ¿",failText:"æ‰¾ä¸åˆ°çµæœ",lvl60:"Lvl 60",lvl100:"Lvl 100",warriorPirate140:"Lvl 140 åŠå£«/æµ·ç›œ",mageThiefArcher140:"Lvl 140 æ³•å¸«/ç›œè³Š/å¼“ç®­æ‰‹",warrior200:"Lvl 200 åŠå£«",archer200:"Lvl 200 å¼“ç®­æ‰‹",thiefLab200:"Lvl 200 ç›œè³Š/Lab",mage200:"Lvl 200 æ³•å¸«",pirate200:"Lvl 200 æµ·ç›œ",warrior250:"Lvl 250 åŠå£«",archer250:"Lvl 250 å¼“ç®­æ‰‹",thief250:"Lvl 250 ç›œè³Š",mage250:"Lvl 250 æ³•å¸«",pirate250:"Lvl 250 æµ·ç›œ",xenon250:"Lvl 250 å‚‘è«¾",enhancedLab200:"Lvl 200 å¼·åŒ–å‹ Lab",enhancedLab250:"Lvl 250 å¼·åŒ–å‹ Lab",lab250:"Lvl 250 Lab"},CMS:{title:"å†’é™©å²›è”ç›Ÿè‡ªåŠ¨æ’åˆ—å·¥å…·",instructions:"ä½¿ç”¨æ–¹æ³•ï¼š",instructionsSub1:"1. ç‚¹å‡»ä½ æƒ³è¦ä½¿ç”¨çš„åŒºå—ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨é€‰å–æ•´ä¸ªåŒºå—åŠŸèƒ½ã€‚",instructionsSub2:"2. è¾“å…¥ä½ æ‹¥æœ‰çš„è§’è‰²æ‹¼å›¾æ•°é‡ã€‚",instructionsSub3:"3. å¿…é¡»è¦ç¡®å®šå¯ä½¿ç”¨çš„åŒºå—æ•°é‡å’Œå¯å¡«å…¥çš„åŒºå—æ•°é‡ç›¸ç­‰ï¼Œå¦åˆ™è‡ªåŠ¨æ’åˆ—ç¨‹åºå°†é™·å…¥æ­»å¾ªç¯ã€‚",instructionsSub4:"4. åªè¦ç‚¹å‡»å¼€å§‹ï¼Œç¨‹åºå°±ä¼šè‡ªåŠ¨æŒ‰ç…§ä½ è¾“å…¥çš„æ‹¼å›¾æ•°é‡å¡«æ»¡åŒºå—ã€‚ä½ ä¹Ÿå¯ä»¥æ‰“å¼€å®æ—¶æ¼”ç®—åŠŸèƒ½æ¥æŸ¥çœ‹è¿‡ç¨‹ã€‚",spacesToBeFilled:"å¯å¡«å…¥çš„åŒºå—æ•°é‡: ",boardSpacesFilled:"å¯ä½¿ç”¨çš„åŒºå—æ•°é‡: ",currentCaracterCountFiled:"ç•¶å½“å‰ä½¿ç”¨çš„è§’è‰²æ•°é‡: ",iterations:"å°è¯•æ¬¡æ•°: ",time:"æ¶ˆè€—æ—¶é—´: ",bigClick:"é€‰å–æ•´ä¸ªåŒºå—",liveSolve:"å®æ—¶æ¼”ç®—",darkMode:"æš—é»‘æ¨¡å¼",start:"å¼€å§‹",pause:"æš‚åœ",continue:"ç»§ç»­",reset:"é‡ç½®",clearPieces:"æ¸…é™¤æ‰€æœ‰çš„æ‹¼å›¾",clearBoard:"æ¸…é™¤é¢æ¿",failText:"æ‰¾ä¸åˆ°è§£",lvl60:"ç­‰çº§ 60",lvl100:"ç­‰çº§ 100",warriorPirate140:"ç­‰çº§ 140 æˆ˜å£«/æµ·ç›—",mageThiefArcher140:"ç­‰çº§ 140 é­”æ³•å¸ˆ/é£ä¾ /å°–å…µ/å¼“ç®­æ‰‹",warrior200:"ç­‰çº§ 200 æˆ˜å£«",archer200:"ç­‰çº§ 200 å¼“ç®­æ‰‹",thiefLab200:"ç­‰çº§ 200 é£ä¾ /å°–å…µ",mage200:"ç­‰çº§ 200 é­”æ³•å¸ˆ",pirate200:"ç­‰çº§ 200 æµ·ç›—",warrior250:"ç­‰çº§ 250 æˆ˜å£«",archer250:"ç­‰çº§ 250 å¼“ç®­æ‰‹",thief250:"ç­‰çº§ 250 é£ä¾ ",mage250:"ç­‰çº§ 250 é­”æ³•å¸ˆ",pirate250:"ç­‰çº§ 250 æµ·ç›—",xenon250:"ç­‰çº§ 250 å°–å…µ",enhancedLab200:"Lvl 200 Enhanced Lab",enhancedLab250:"Lvl 250 Enhanced Lab",lab250:"Lvl 250 Lab"}};let l=c();function c(){const e=function(){let e;switch(window.navigator.userLanguage||window.navigator.language){case"en":e="GMS";break;case"ko":e="KMS";break;case"ja":e="JMS";break;case"cn":e="CMS";break;default:e=null}return e}();return localStorage.getItem("i18n")||e||"GMS"}function s(e){return i[l][e]}function d(e,t){const n=[],o=/^\s*$/;return function e(r){if(3==r.nodeType)!t&&o.test(r.nodeValue)||n.push(r);else for(var a=0,i=r.childNodes.length;a<i;++a)e(r.childNodes[a])}(e),n}document.getElementById("title").textContent=s("title"),d(document.getElementById("instructions"))[0].textContent=s("instructions"),d(document.getElementById("paragraph"))[0].textContent=s("instructionsSub1"),d(document.getElementById("paragraph"))[1].textContent=s("instructionsSub2"),d(document.getElementById("paragraph"))[2].textContent=s("instructionsSub3"),d(document.getElementById("paragraph"))[3].textContent=s("instructionsSub4"),d(document.getElementById("currentPieces"))[0].textContent=s("spacesToBeFilled"),d(document.getElementById("boardFilled"))[0].textContent=s("boardSpacesFilled"),d(document.getElementById("currentCaracterCount"))[0].textContent=s("currentCaracterCountFiled"),d(document.getElementById("iterations"))[0].textContent=s("iterations"),d(document.getElementById("time"))[0].textContent=s("time"),document.querySelector('label[for="bigClick"]').textContent=s("bigClick"),document.querySelector('label[for="liveSolve"]').textContent=s("liveSolve"),document.querySelector('label[for="darkMode"]').textContent=s("darkMode"),document.getElementById("boardButton").textContent=s("start"),document.getElementById("resetButton").textContent=s("reset"),document.getElementById("clearPieces").textContent=s("clearPieces"),document.getElementById("clearBoard").textContent=s("clearBoard"),document.getElementById("failText").textContent=s("failText"),document.getElementById("languageSelectBox").addEventListener("change",(function(){localStorage.setItem("i18n",this.value),location.reload()})),document.getElementById(l).selected=!0;class g{constructor(e,t){this.x=e,this.y=t}}var h,p,u=n(543);class m{constructor(e,t,n){this.shape=e,this.amount=t,this.id=n}static createPiece(e,t){return new m(e,t,this.curId++)}get cellCount(){Object.defineProperty(this,"cellCount",{value:0,writable:!0});for(let e=0;e<this.shape.length;++e)for(let t=0;t<this.shape[e].length;++t)this.shape[e][t]>0&&this.cellCount++;return this.cellCount}get pointShape(){Object.defineProperty(this,"pointShape",{value:[]});for(let e=0;e<this.shape.length;++e)for(let t=0;t<this.shape[e].length;++t)1==this.shape[e][t]?this.pointShape.push(new f(t,e,!1)):2==this.shape[e][t]&&this.pointShape.push(new f(t,e,!0));return this.pointShape}get offCenter(){Object.defineProperty(this,"offCenter",{value:0,writable:!0});for(let e=0;e<this.shape[0].length;e++)if(0!=this.shape[0][e]){this.offCenter=e;break}return this.offCenter}get transformations(){Object.defineProperty(this,"transformations",{value:[],writable:!0});let e,t=[...this.shape];for(let n=0;n<2;n++){for(let n=0;n<4;n++){e=new Array(t[0].length).fill(0).map((()=>new Array(t.length).fill(0)));for(let n=0;n<t.length;n++)for(let o=0;o<t[0].length;o++)0!=t[n][o]&&(e[t[0].length-o-1][n]=t[n][o]);t=e,this.transformations.push(new m(t,this.amount,this.id))}e=new Array(t.length).fill(0).map((()=>new Array(t[0].length).fill(0)));for(let n=0;n<t.length;n++)for(let o=0;o<t[0].length;o++)0!=t[n][o]&&(e[t.length-n-1][o]=t[n][o]);t=e}return this.transformations=u.unionWith(this.transformations,u.isEqual),this.transformations}get pointTransformations(){Object.defineProperty(this,"pointTransformations",{value:[]});for(let e of this.transformations)this.pointTransformations.push(e.pointShape);return this.pointTransformations}get restrictedTransformations(){Object.defineProperty(this,"restrictedTransformations",{value:[]});for(let e of this.transformations)e.shape[0][1+e.offCenter]&&0!=e.shape[0][1+e.offCenter]||this.restrictedTransformations.push(e);return this.restrictedTransformations}get restrictedPointTransformations(){Object.defineProperty(this,"restrictedPointTransformations",{value:[]});for(let e of this.restrictedTransformations)this.restrictedPointTransformations.push(e.pointShape);return this.restrictedPointTransformations}}h=m,(p=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(p="curId"))in h?Object.defineProperty(h,p,{value:1,enumerable:!0,configurable:!0,writable:!0}):h[p]=1;class f extends g{constructor(e,t,n){super(e,t),this.isMiddle=n}}const b="boardFilled",y="pieceAmounts",v="currentPieces",x=[[[2]],[[2,2]],[[1,0],[2,1]],[[1,2,1]],[[2,2],[2,2]],[[1,2,2,1]],[[1,0,0],[1,2,1]],[[0,1,0],[1,2,1]],[[1,2,0],[0,2,1]],[[1,1,2],[0,1,1]],[[1,1,2,1,1]],[[0,0,1],[1,2,1],[0,0,1]],[[0,1,0],[1,2,1],[0,1,0]],[[1,2,0,0],[0,1,1,1]],[[1,1,0],[0,2,0],[0,1,1]]],S=[[[1,0,0,0],[0,1,2,1]],[[1,0,0,0,1],[0,1,2,1,0]],[[1,0,1],[1,2,1]]],I=[];for(let e of x)I.push(m.createPiece(e,0));function w(){return!!["GMS","TMS"].find((e=>e===c()))}if(w())for(let e of S)I.push(m.createPiece(e,0));let E=new Map;E.set(-1,"white"),E.set(0,"grey");for(let e=0;e<2;e++)E.set(1+18*e,"lightpink"),E.set(2+18*e,"lightcoral"),E.set(3+18*e,"indianred"),E.set(4+18*e,"darkseagreen"),E.set(5+18*e,"firebrick"),E.set(6+18*e,"mediumseagreen"),E.set(7+18*e,"purple"),E.set(8+18*e,"dodgerblue"),E.set(9+18*e,"lightsteelblue"),E.set(10+18*e,"maroon"),E.set(11+18*e,"green"),E.set(12+18*e,"indigo"),E.set(13+18*e,"blue"),E.set(14+18*e,"cadetblue"),E.set(15+18*e,"mediumpurple"),E.set(16+18*e,"aquamarine"),E.set(17+18*e,"aquamarine"),E.set(18+18*e,"aquamarine");function B(){if(document.querySelector("#pieceForm form")){for(let e=0;e<I.length;e++){let t=`<tr>${'<td class="pieceCell"></td>'.repeat(I[e].shape[0].length)}</tr>`.repeat(I[e].shape.length);document.querySelector("#pieceForm form").innerHTML+=`<div class="piece">\n            <div id="pieceDescription${e+1}"></div>\n            <label for="piece${e+1}">\n                <table id="pieceDisplay${e+1}">\n                    <tbody>${t}</tbody>\n                </table>\n            </label>\n            <input id="piece${e+1}" type="number" min=0 value=0>\n        </div>`,document.getElementById(`pieceDisplay${e+1}`).style.borderCollapse="collapse",document.getElementById(`pieceDisplay${e+1}`).style.borderSpacing="0",document.getElementById(`pieceDescription${e+1}`).style.paddingRight="15px";for(let t=0;t<I[e].shape.length;t++)for(let n=0;n<I[e].shape[t].length;n++)0!=I[e].shape[t][n]&&(document.getElementById(`pieceDisplay${e+1}`).getElementsByTagName("tr")[t].getElementsByTagName("td")[n].style.background=E.get(e+1))}document.getElementById("pieceDescription1").textContent=s("lvl60"),document.getElementById("pieceDescription2").textContent=s("lvl100"),document.getElementById("pieceDescription3").textContent=s("warriorPirate140"),document.getElementById("pieceDescription4").textContent=s("mageThiefArcher140"),document.getElementById("pieceDescription5").textContent=s("warrior200"),document.getElementById("pieceDescription6").textContent=s("archer200"),document.getElementById("pieceDescription7").textContent=s("thiefLab200"),document.getElementById("pieceDescription8").textContent=s("mage200"),document.getElementById("pieceDescription9").textContent=s("pirate200"),document.getElementById("pieceDescription10").textContent=s("warrior250"),document.getElementById("pieceDescription11").textContent=s("archer250"),document.getElementById("pieceDescription12").textContent=s("thief250"),document.getElementById("pieceDescription13").textContent=s("mage250"),document.getElementById("pieceDescription14").textContent=s("pirate250"),document.getElementById("pieceDescription15").textContent=s("xenon250"),w()&&(document.getElementById("pieceDescription16").textContent=s("enhancedLab200"),document.getElementById("pieceDescription17").textContent=s("enhancedLab250"),document.getElementById("pieceDescription18").textContent=s("lab250"))}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",B):B();let L=0,C=0;localStorage.getItem(v)&&(L=JSON.parse(localStorage.getItem(v)),document.getElementById("currentPiecesValue").innerText=`${L}`);let k=JSON.parse(localStorage.getItem(y));function P(){if(window._isUpdatingCurrentPieces)console.log("Already updating current pieces, preventing recursion");else{window._isUpdatingCurrentPieces=!0;try{console.log("Updating current pieces");const e=document.getElementById("boardButton")?.innerText||"",t=e&&e!==s("start"),n=t?localStorage.getItem(b):null;for(let e of I){const t=document.getElementById(`piece${e.id}`);t&&(e.amount=parseInt(t.value)||0)}L=(0,u.sumBy)(I,(e=>e.cellCount*e.amount)),C=(0,u.sumBy)(I,(e=>e.amount)),localStorage.setItem(y,JSON.stringify(I.map((e=>e.amount)))),localStorage.setItem(v,JSON.stringify(L));const o=document.getElementById("currentPiecesValue");o&&(o.innerText=`${L}`);const r=document.getElementById("currentCaracterCountValue");if(r&&(r.innerText=`${C}`),t&&n){console.log(`Preserving boardFilled value (${n}) in updateCurrentPieces`),localStorage.setItem(b,n);const e=document.getElementById("boardFilledValue");e&&(e.innerText=JSON.parse(n))}window._isSavingPreset||W()}finally{window._isUpdatingCurrentPieces=!1}}}k&&document.addEventListener("DOMContentLoaded",(()=>{for(let e=0;e<I.length;e++){const t=document.getElementById(`piece${e+1}`);t&&(t.value=k[e]||0)}P()})),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("pieceForm");e&&e.addEventListener("input",P)})),window.pieces=I,window.currentPieces=L,window.currentUseCaracterCount=C;const $={SELECTED_CHARACTERS:"legionSolver_selectedCharacters_preset_",BOARD_STATE:"legionBoard_preset_",BOARD_FILLED:"boardFilled_preset_",ACTIVE_PRESET:"legionSolver_activePreset",PIECE_AMOUNTS:"pieceAmounts",CURRENT_PIECES:"currentPieces"};let T=1;const D=[{id:1,name:"Hero",class:"warrior",level:250,legionEffect:"STR +",pieceIndex:9,icon:"âš”ï¸"},{id:2,name:"Paladin",class:"warrior",level:250,legionEffect:"STR +",pieceIndex:9,icon:"ğŸ›¡ï¸"},{id:3,name:"Dark Knight",class:"warrior",level:250,legionEffect:"Max HP +%",pieceIndex:9,icon:"ğŸ”±"},{id:4,name:"Dawn Warrior",class:"warrior",level:250,legionEffect:"Max HP +%",pieceIndex:9,icon:"â˜€ï¸"},{id:5,name:"Mihile",class:"warrior",level:250,legionEffect:"Max HP +",pieceIndex:9,icon:"ğŸ”†"},{id:6,name:"Blaster",class:"warrior",level:250,legionEffect:"IED +%",pieceIndex:9,icon:"ğŸ’¥"},{id:7,name:"Demon Slayer",class:"warrior",level:250,legionEffect:"Status Resistance +",pieceIndex:9,icon:"ğŸ˜ˆ"},{id:8,name:"Demon Avenger",class:"warrior",level:250,legionEffect:"Boss DMG +%",pieceIndex:9,icon:"ğŸ”¥"},{id:9,name:"Aran",class:"warrior",level:250,legionEffect:"70% chance to heal MAXHP +%",pieceIndex:9,icon:"â„ï¸"},{id:44,name:"Hayato",class:"warrior",level:250,legionEffect:"Critical Damage +%",pieceIndex:9,icon:"âš”ï¸"},{id:10,name:"Arch Mage (Fire/Poison)",class:"mage",level:250,legionEffect:"Max MP +%",pieceIndex:12,icon:"ğŸ”¥"},{id:11,name:"Arch Mage (Ice/Lightning)",class:"mage",level:250,legionEffect:"INT +",pieceIndex:12,icon:"âš¡"},{id:12,name:"Bishop",class:"mage",level:250,legionEffect:"INT +",pieceIndex:12,icon:"âœï¸"},{id:13,name:"Battle Mage",class:"mage",level:250,legionEffect:"INT +",pieceIndex:12,icon:"ğŸ§™â€â™‚ï¸"},{id:14,name:"Luminous",class:"mage",level:250,legionEffect:"INT +",pieceIndex:12,icon:"â˜¯ï¸"},{id:15,name:"Evan",class:"mage",level:250,legionEffect:"70% chance to heal MAXMP +%",pieceIndex:12,icon:"ğŸ‰"},{id:16,name:"Illium",class:"mage",level:250,legionEffect:"INT +",pieceIndex:12,icon:"ğŸ’"},{id:17,name:"Kanna",class:"mage",level:250,legionEffect:"Boss DMG +%",pieceIndex:12,icon:"ğŸŒ¸"},{id:18,name:"Bowmaster",class:"archer",level:250,legionEffect:"DEX +",pieceIndex:10,icon:"ğŸ¹"},{id:19,name:"Marksman",class:"archer",level:250,legionEffect:"Critical Rate +%",pieceIndex:10,icon:"ğŸ¯"},{id:20,name:"Pathfinder",class:"archer",level:250,legionEffect:"DEX +",pieceIndex:10,icon:"âš±ï¸"},{id:21,name:"Wind Archer",class:"archer",level:250,legionEffect:"DEX +",pieceIndex:10,icon:"ğŸƒ"},{id:22,name:"Wild Hunter",class:"archer",level:250,legionEffect:"Damage to Normal Monsters +%",pieceIndex:10,icon:"ğŸ†"},{id:23,name:"Mercedes",class:"archer",level:250,legionEffect:"Skill Cooldown -%",pieceIndex:10,icon:"ğŸ§â€â™€ï¸"},{id:24,name:"Night Lord",class:"thief",level:250,legionEffect:"Critical Rate +%",pieceIndex:11,icon:"ğŸŒ‘"},{id:25,name:"Shadower",class:"thief",level:250,legionEffect:"LUK +",pieceIndex:11,icon:"ğŸ—¡ï¸"},{id:26,name:"Dual Blade",class:"thief",level:250,legionEffect:"LUK +",pieceIndex:11,icon:"âš”ï¸"},{id:27,name:"Night Walker",class:"thief",level:250,legionEffect:"LUK +",pieceIndex:11,icon:"ğŸ¦‡"},{id:28,name:"Phantom",class:"thief",level:250,legionEffect:"Meso Obtained +%",pieceIndex:11,icon:"â™ ï¸"},{id:29,name:"Cadena",class:"thief",level:250,legionEffect:"LUK +",pieceIndex:11,icon:"â›“ï¸"},{id:30,name:"Hoyoung",class:"thief",level:250,legionEffect:"LUK +",pieceIndex:11,icon:"ğŸ¦Š"},{id:43,name:"Khali",class:"thief",level:250,legionEffect:"LUK +",pieceIndex:11,icon:"ğŸ¥·"},{id:31,name:"Buccaneer",class:"pirate",level:250,legionEffect:"STR +",pieceIndex:13,icon:"ğŸ‘Š"},{id:32,name:"Corsair",class:"pirate",level:250,legionEffect:"Summon Duration +%",pieceIndex:13,icon:"ğŸ”«"},{id:33,name:"Cannoneer",class:"pirate",level:250,legionEffect:"STR +",pieceIndex:13,icon:"ğŸ’£"},{id:34,name:"Shade",class:"pirate",level:250,legionEffect:"Crit DMG +%",pieceIndex:13,icon:"ğŸ‘»"},{id:35,name:"Angelic Buster",class:"pirate",level:250,legionEffect:"DEX +",pieceIndex:13,icon:"ğŸ’•"},{id:36,name:"Thunder Breaker",class:"pirate",level:250,legionEffect:"STR +",pieceIndex:13,icon:"âš¡"},{id:37,name:"Mechanic",class:"pirate",level:250,legionEffect:"Buff Duration +%",pieceIndex:13,icon:"ğŸ¤–"},{id:38,name:"Ark",class:"pirate",level:250,legionEffect:"STR +",pieceIndex:13,icon:"ğŸ™"},{id:39,name:"Xenon",class:"special",level:250,legionEffect:"STR,DEX,LUK +",pieceIndex:14,icon:"ğŸ¤–"},{id:40,name:"Zero",class:"warrior",level:250,legionEffect:"EXP +%",pieceIndex:9,icon:"âš”ï¸"},{id:41,name:"Kinesis",class:"mage",level:250,legionEffect:"INT +",pieceIndex:12,icon:"ğŸ§ "},{id:42,name:"Adele",class:"warrior",level:250,legionEffect:"STR +",pieceIndex:9,icon:"âš”ï¸"},{id:45,name:"Lynn",class:"mage",level:250,legionEffect:"IED +%",pieceIndex:12,icon:"ğŸª„"},{id:46,name:"Lara",class:"mage",level:250,legionEffect:"INT +",pieceIndex:12,icon:"ğŸŒ¿"}];function N(){console.log("DEBUG: initCharacterSelector start"),console.log("Initializing character selector"),setTimeout((()=>{if(!document.getElementById("characterSelector"))return void console.error("Character selector element not found");const e=document.querySelector(".filterContainer");if(console.log("DEBUG: filterContainer:",e),e){e.innerHTML="";for(let t=1;t<=5;t++){const n=document.createElement("button");n.className="presetBtn",n.setAttribute("data-preset",t),n.textContent=`Preset ${t}`,n.onclick=function(){M(t)},e.appendChild(n)}console.log("Created 5 preset buttons")}else{console.error("Filter container not found, trying direct selection by ID");const e=document.getElementById("classCategories");if(e){e.innerHTML="";for(let t=1;t<=5;t++){const n=document.createElement("button");n.className="presetBtn",n.setAttribute("data-preset",t),n.textContent=`Preset ${t}`,n.onclick=function(){M(t)},e.appendChild(n)}console.log("Created 5 preset buttons using ID"),e.classList.contains("filterContainer")||e.classList.add("filterContainer")}else console.error("Could not find classCategories by ID either")}console.log("DEBUG: About to render character cards"),function(){if(console.log("DEBUG: renderCharacterCards called"),console.log("DEBUG: characterData length:",D.length),!D||0===D.length)return void console.error("Character data is missing or empty");console.log("Rendering character cards");const e=document.getElementById("characterSelector");if(!e)return console.error("Character selector element not found"),void setTimeout((()=>{const e=document.getElementById("characterSelector");e?(console.log("Character selector found after retry"),R(e)):console.error("Character selector still not found after retry")}),300);R(e)}(),F();const t=document.getElementById("clearPieces");t&&(t.onclick=function(){console.log("Clearing all selected pieces"),q(),J(),W()});const n=localStorage.getItem($.ACTIVE_PRESET);n&&(T=parseInt(n)),A(),setTimeout((()=>{j()}),100),console.log("DEBUG: initCharacterSelector completed")}),200)}function A(){document.querySelectorAll(".presetBtn").forEach((e=>{e.classList.remove("active")}));const e=document.querySelector(`.presetBtn[data-preset="${T}"]`);e&&e.classList.add("active")}function F(){if(document.getElementById("pieceForm"))return;console.log("Creating hidden piece form");const e=document.createElement("div");e.id="pieceForm",e.style.display="none";const t=document.createElement("form");for(let e=1;e<=18;e++){const n=document.createElement("input");n.type="number",n.id=`piece${e}`,n.name=`piece${e}`,n.value="0",n.min="0",t.appendChild(n)}e.appendChild(t),document.body.appendChild(e),console.log("Hidden piece form created with inputs for pieces 1-18")}function M(e){console.log(`Switching to preset ${e}`),T!==e?(W(),T=e,localStorage.setItem($.ACTIVE_PRESET,T.toString()),A(),j(),O(e),"function"==typeof window.updateBoardDisplay&&(console.log("Using global updateBoardDisplay for comprehensive board update"),setTimeout((()=>{window.updateBoardDisplay()}),50))):console.log(`Already on preset ${e}, no action needed`)}function O(e){console.log(`Loading board state for preset ${e}`);const t=localStorage.getItem(`${$.BOARD_STATE}${e}`),n=localStorage.getItem(`${$.BOARD_FILLED}${e}`);if(t)localStorage.setItem("legionBoard",t),console.log(`Loaded board state for preset ${e}`);else{console.log(`No board state found for preset ${e}, creating new empty board`);const t=[];for(let e=0;e<20;e++){t[e]=[];for(let n=0;n<22;n++)t[e][n]=-1}const n=JSON.stringify(t);localStorage.setItem("legionBoard",n),localStorage.setItem(`${$.BOARD_STATE}${e}`,n)}if(n){localStorage.setItem("boardFilled",n);const t=document.getElementById("boardFilledValue");t&&(t.innerText=JSON.parse(n)),console.log(`Loaded board filled state (${n}) for preset ${e}`)}else{localStorage.setItem("boardFilled",JSON.stringify(0)),localStorage.setItem(`${$.BOARD_FILLED}${e}`,JSON.stringify(0));const t=document.getElementById("boardFilledValue");t&&(t.innerText="0"),console.log(`No board filled state found for preset ${e}, setting to 0`)}"function"==typeof window.updateBoardDisplay&&window.updateBoardDisplay()}function R(e){console.log("DEBUG: container element:",e),e.innerHTML="";const t=document.createElement("div");t.className="character-sections-container";const n={"STR +":"ğŸ’ª","DEX +":"ğŸ¯","INT +":"ğŸ§ ","LUK +":"ğŸ€","Max HP +%":"â¤ï¸","Max HP +":"â¤ï¸","Max MP +%":"ğŸ’™","Max MP +":"ğŸ’™","IED +%":"ğŸ›¡ï¸","Boss DMG +%":"ğŸ‘‘","Crit Rate +%":"ğŸ¯","Crit DMG +%":"ğŸ’¥","Buff Duration +%":"â±ï¸","Skill Cooldown -%":"âš¡","Summon Duration +%":"ğŸ§š","Damage to Normal Monsters +%":"ğŸ‘¹","Meso Obtained +%":"ğŸ’°","EXP +%":"ğŸ“Š","STR,DEX,LUK +%":"ğŸ“ˆ"},o={warrior:{title:"Warriors",characters:[]},mage:{title:"Mages",characters:[]},archer:{title:"Archers",characters:[]},thief:{title:"Thieves",characters:[]},pirate:{title:"Pirates",characters:[]},special:{title:"Special Classes",characters:[]}};D.forEach((e=>{o[e.class]?o[e.class].characters.push(e):console.warn(`Unknown character class: ${e.class}`)})),Object.values(o).forEach((e=>{if(0===e.characters.length)return;const o=document.createElement("div");o.className="character-section";const r=document.createElement("div");r.className="character-section-header",r.innerHTML=`\n            <span>${e.title}</span>\n            <span class="section-toggle">â–¼</span>\n        `,o.appendChild(r);const a=document.createElement("div");a.className="character-cards-container",e.characters.forEach((e=>{const t=document.createElement("div");t.className="characterCard",t.dataset.id=e.id,t.dataset.class=e.class;const o=e.legionEffect,r=n[o]||"ğŸ”®";t.innerHTML=`\n                <div class="characterName">${e.name}</div>\n                <div class="characterClass">\n                    <span class="effect-icon">${r}</span>\n                    <span class="effect-text">${o}</span>\n                </div>\n            `,t.onclick=function(){console.log("Character card clicked:",e.name),function(e){console.log("Selecting character:",e.name);const t=document.getElementById("characterDetailsContent");if(!t)return void console.error("Character details content element not found");const n={warrior:{60:0,100:1,140:2,200:4,250:9},mage:{60:0,100:1,140:3,200:7,250:12},archer:{60:0,100:1,140:3,200:5,250:10},thief:{60:0,100:1,140:3,200:6,250:11},pirate:{60:0,100:1,140:2,200:8,250:13},special:{60:e.pieceIndex,100:e.pieceIndex,140:e.pieceIndex,200:e.pieceIndex,250:e.pieceIndex}},o=[60,100,140,200,250].map((t=>`\n            <label class="level-option">\n                <input type="radio" name="characterLevel" value="${t}" data-piece-index="${n[e.class][t]||0}" ${250===t?"checked":""}>\n                <span>Level ${t}</span>\n            </label>\n        `)).join("");t.innerHTML=`\n        <div class="characterDetailCard" data-class="${e.class}">\n            <h4>${e.name}</h4>\n            <p><strong>Class:</strong> ${e.class.charAt(0).toUpperCase()+e.class.slice(1)}</p>\n            <p><strong>Legion Effect:</strong> ${e.legionEffect}</p>\n            \n            <div class="level-selection">\n                <p><strong>Select Character Level:</strong></p>\n                <div class="level-options">\n                    ${o}\n                </div>\n            </div>\n            \n            <button id="addCharacterBtn">Add to Board</button>\n        </div>\n    `;const r=document.getElementById("addCharacterBtn");r&&(r.onclick=function(){const t=document.querySelector('input[name="characterLevel"]:checked'),n=t?parseInt(t.value):250,o=t?parseInt(t.dataset.pieceIndex):e.pieceIndex;console.log("Adding character to board:",e.name,"Level:",n,"Piece Index:",o),function(e){console.log("Adding character to piece selection:",e.name,"Level:",e.level,"Piece Index:",e.pieceIndex);const t=document.getElementById("boardButton"),n={boardFilled:localStorage.getItem($.BOARD_FILLED),boardState:localStorage.getItem($.BOARD_STATE),solverState:t?.innerText||""},o=n.solverState&&n.solverState!==s("start");console.log("Current board state:",`Filled spaces: ${n.boardFilled||0}, `,`Solver state: ${n.solverState}, `,`Is after start: ${o}`);const r=document.getElementById("pieceSelectionContent");if(!r)return void console.error("Piece selection content element not found");const a=`${e.id}-${e.level}`;if(document.querySelector(`.selectedPiece[data-unique-id="${a}"]`))return void console.log("Character already selected at this level");const i=document.createElement("div");i.className=`selectedPiece ${(e=>{switch(e){case 1:return"piece-lvl60";case 2:return"piece-lvl100";case 3:return"piece-lvl140-warrior-pirate";case 4:return"piece-lvl140-mage-thief-archer";case 5:return"piece-lvl200-warrior";case 6:return"piece-lvl200-archer";case 7:return"piece-lvl200-thief-lab";case 8:return"piece-lvl200-mage";case 9:return"piece-lvl200-pirate";case 10:return"piece-lvl250-warrior";case 11:return"piece-lvl250-archer";case 12:return"piece-lvl250-thief";case 13:return"piece-lvl250-mage";case 14:return"piece-lvl250-pirate";case 15:return"piece-lvl250-xenon";case 16:case 17:case 18:return"piece-lab-enhanced";default:return""}})(e.pieceIndex)}`,i.dataset.id=e.id,i.dataset.uniqueId=a,i.dataset.pieceIndex=e.pieceIndex,i.dataset.level=e.level,i.dataset.characterClass=e.class,i.innerHTML=`\n        <div class="selectedPieceInfo">\n            <span class="characterName">${e.name}</span>\n            <span class="characterLevel">Lvl ${e.level}</span>\n        </div>\n        <button class="removePieceBtn">Ã—</button>\n    `;const l=i.querySelector(".removePieceBtn");l&&(l.onclick=function(){console.log("Removing character:",e.name,"Level:",e.level),i.remove(),J(),U(e.id,!1),W()});const c=o&&n.boardFilled?JSON.parse(n.boardFilled):0;if(r.appendChild(i),J(),U(e.id,!0),W(),o&&n.boardFilled){console.log(`Restoring board state after adding character during solving: ${c}`),localStorage.setItem($.BOARD_FILLED,JSON.stringify(c));const e=document.getElementById("boardFilledValue");e&&(e.innerText=c.toString(),console.log(`Restored boardFilled display to ${c}`)),"function"==typeof window.updatePiecesForSolver&&setTimeout((()=>{console.log("Calling updatePiecesForSolver to verify board state"),window.updatePiecesForSolver()}),100)}}({...e,level:n,pieceIndex:o})})}(e)},a.appendChild(t)})),o.appendChild(a),r.addEventListener("click",(function(e){if(e.target.closest(".characterCard"))return;const t="none"!==a.style.display;a.style.display=t?"none":"grid";const n=r.querySelector(".section-toggle");n&&(n.textContent=t?"â–¶":"â–¼")})),t.appendChild(o)})),e.appendChild(t),console.log("DEBUG: Characters rendered by class sections")}function U(e,t){const n=document.querySelector(`.characterCard[data-id="${e}"]`);n&&(t?n.classList.add("selected"):n.classList.remove("selected"))}function J(){if(console.log("Updating piece amounts"),window._isUpdatingPieces)console.log("Already updating pieces, preventing recursive call");else{window._isUpdatingPieces=!0;try{const e=document.getElementById("boardButton"),t=e?.innerText||"",n=t&&t!==s("start");let o=null;n&&(o=localStorage.getItem($.BOARD_FILLED),console.log(`Solver is in ${t} state, preserving boardFilled: ${o}`)),document.getElementById("pieceForm")||F();for(let e=1;e<=18;e++){const t=document.getElementById(`piece${e}`);if(t)t.value=0;else{console.warn(`Piece input element for piece${e} not found`);const t=document.querySelector("#pieceForm form");if(t){const n=document.createElement("input");n.type="number",n.id=`piece${e}`,n.name=`piece${e}`,n.value="0",n.min="0",t.appendChild(n),console.log(`Created missing piece input: piece${e}`)}}}const r={};let a=0,i=0;document.querySelectorAll(".selectedPiece").forEach((e=>{const t=parseInt(e.dataset.pieceIndex);r[t]=(r[t]||0)+1,a++;const n=parseInt(e.dataset.level)||250;let o=1;60===n?o=1:100===n?o=2:140===n?o=3:200===n?o=4:250===n&&(o=5),i+=o})),console.log("Piece counts by index:",r),console.log("Total characters:",a),console.log("Total pieces (cells):",i);for(const[e,t]of Object.entries(r)){const n=document.getElementById(`piece${e}`);n?(n.value=t,console.log(`Updated piece${e} to ${t}`)):console.warn(`Piece input element for piece${e} not found`)}if(n&&o){console.log(`Restoring boardFilled value (${o}) after character update`),localStorage.setItem($.BOARD_FILLED,o);const e=document.getElementById("boardFilledValue");e&&(e.innerText=JSON.parse(o))}"function"==typeof window.updateCurrentPieces&&window.updateCurrentPieces()}finally{window._isUpdatingPieces=!1}}}function W(){if(window._isSavingState)console.log("Already saving state, preventing recursion");else{window._isSavingState=!0;try{console.log(`Saving current state to localStorage for preset ${T}`);const e=[];document.querySelectorAll(".selectedPiece").forEach((t=>{e.push({characterId:parseInt(t.dataset.id),level:parseInt(t.dataset.level),pieceIndex:parseInt(t.dataset.pieceIndex),uniqueId:t.dataset.uniqueId})})),localStorage.setItem(`${$.SELECTED_CHARACTERS}${T}`,JSON.stringify(e)),function(){console.log(`Saving board state for preset ${T}`);const e=localStorage.getItem("legionBoard"),t=localStorage.getItem("boardFilled");e?(localStorage.setItem(`${$.BOARD_STATE}${T}`,e),console.log(`Saved board layout for preset ${T}`)):(localStorage.removeItem(`${$.BOARD_STATE}${T}`),console.log(`Removed board layout for preset ${T}`)),t?(localStorage.setItem(`${$.BOARD_FILLED}${T}`,t),console.log(`Saved board filled count (${t}) for preset ${T}`)):(localStorage.removeItem(`${$.BOARD_FILLED}${T}`),console.log(`Removed board filled count for preset ${T}`))}(),console.log(`Saved ${e.length} characters to localStorage for preset ${T}`)}catch(e){console.error("Error saving state to localStorage:",e)}finally{window._isSavingState=!1}}}function j(){console.log(`Loading saved state from localStorage for preset ${T}`);try{q();const e=localStorage.getItem(`${$.SELECTED_CHARACTERS}${T}`);if(e){const t=JSON.parse(e);t&&t.length>0?(console.log(`Found ${t.length} saved characters for preset ${T}`),t.forEach((e=>{const t=D.find((t=>t.id===e.characterId));t&&function(e){console.log("Adding saved character:",e.name,"Level:",e.level);const t=document.getElementById("pieceSelectionContent");if(!t)return void console.error("Piece selection content element not found");const n=`${e.id}-${e.level}`;if(document.querySelector(`.selectedPiece[data-unique-id="${n}"]`))return void console.log("Character already selected at this level");const o=document.createElement("div");o.className=`selectedPiece ${(e=>{switch(e){case 1:return"piece-lvl60";case 2:return"piece-lvl100";case 3:return"piece-lvl140-warrior-pirate";case 4:return"piece-lvl140-mage-thief-archer";case 5:return"piece-lvl200-warrior";case 6:return"piece-lvl200-archer";case 7:return"piece-lvl200-thief-lab";case 8:return"piece-lvl200-mage";case 9:return"piece-lvl200-pirate";case 10:return"piece-lvl250-warrior";case 11:return"piece-lvl250-archer";case 12:return"piece-lvl250-thief";case 13:return"piece-lvl250-mage";case 14:return"piece-lvl250-pirate";case 15:return"piece-lvl250-xenon";case 16:case 17:case 18:return"piece-lab-enhanced";default:return""}})(e.pieceIndex)}`,o.dataset.id=e.id,o.dataset.uniqueId=n,o.dataset.pieceIndex=e.pieceIndex,o.dataset.level=e.level,o.dataset.characterClass=e.class,o.innerHTML=`\n        <div class="selectedPieceInfo">\n            <span class="characterName">${e.name}</span>\n            <span class="characterLevel">Lvl ${e.level}</span>\n        </div>\n        <button class="removePieceBtn">Ã—</button>\n    `;const r=o.querySelector(".removePieceBtn");r&&(r.onclick=function(){console.log("Removing character:",e.name,"Level:",e.level),o.remove(),J(),U(e.id,!1),W()}),t.appendChild(o),U(e.id,!0)}({...t,level:e.level,pieceIndex:e.pieceIndex})})),J()):(console.log("No saved characters found for this preset"),V())}else console.log("No saved character state found for this preset"),V();O(T)}catch(e){console.error("Error loading state from localStorage:",e)}}function q(){const e=document.getElementById("pieceSelectionContent");e&&(e.innerHTML=""),document.querySelectorAll(".characterCard.selected").forEach((e=>{e.classList.remove("selected")}))}function z(){if(window._isSavingPreset)console.log("Already saving preset, preventing recursive call");else{window._isSavingPreset=!0;try{J(),W()}finally{window._isSavingPreset=!1}}}function V(){console.log("Resetting all piece amounts to zero");for(let e=1;e<=18;e++){const t=document.getElementById(`piece${e}`);t&&(t.value=0)}if(q(),window.pieces)for(let e of window.pieces)e.amount=0;const e=document.getElementById("currentPiecesValue");e&&(e.innerText="0");const t=document.getElementById("currentCaracterCountValue");t&&(t.innerText="0"),localStorage.setItem($.PIECE_AMOUNTS,JSON.stringify(Array(18).fill(0))),localStorage.setItem($.CURRENT_PIECES,JSON.stringify(0)),setTimeout((()=>{"function"==typeof window.updateCurrentPieces&&window.updateCurrentPieces()}),0)}function G(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.charactersData=D,window.updatePieceAmounts=J,console.log("DEBUG: Attempting immediate initialization"),"complete"===document.readyState||"interactive"===document.readyState?(console.log("DEBUG: Document ready, will initialize shortly"),setTimeout(N,300)):(console.log("DEBUG: Document not ready, adding event listener"),document.addEventListener("DOMContentLoaded",(function(){console.log("DEBUG: DOMContentLoaded from characters.js"),setTimeout(N,300)}))),window.debugCharacterSelector=function(){console.log("=== Character Selection Debug Information ==="),console.log(`Active Preset: ${T}`);const e=document.querySelectorAll(".characterCard"),t={};e.forEach((e=>{const n=e.getAttribute("data-class");t[n]=(t[n]||0)+1})),console.log(`Total character cards: ${e.length}`),console.log("Character counts by class:",t);const n=document.querySelectorAll(".presetBtn");console.log(`Total preset buttons: ${n.length}`),console.log("Preset buttons:",Array.from(n).map((e=>e.getAttribute("data-preset"))));const o=document.querySelector(".presetBtn.active");o?console.log("Active preset button:",o.getAttribute("data-preset")):console.log("No active preset button found");const r=document.querySelectorAll(".selectedPiece");console.log(`Total selected pieces: ${r.length}`),r.length>0&&(console.log("Selected pieces details:"),r.forEach((e=>{const t=e.getAttribute("data-id"),n=e.getAttribute("data-piece-index"),o=e.getAttribute("data-level");if(console.log(`- ID: ${t}, Piece Index: ${n}, Level: ${o}`),window.pieces&&n>0&&n<=window.pieces.length){const e=n-1;window.pieces[e]&&window.pieces[e].shape&&(console.log("  Shape:"),window.pieces[e].shape.forEach((e=>{let t="  ";e.forEach((e=>{t+=0===e?"â–¡ ":"â–  "})),console.log(t)})))}}))),console.log("=== Preset Storage Debug ===");for(let e=1;e<=5;e++){const t=`${$.SELECTED_CHARACTERS}${e}`,n=`${$.BOARD_STATE}${e}`,o=`${$.BOARD_FILLED}${e}`,r=localStorage.getItem(t),a=localStorage.getItem(n),i=localStorage.getItem(o);console.log(`Preset ${e}:`),console.log("- Characters: "+(r?JSON.parse(r).length+" characters":"None")),console.log("- Board State: "+(a?"Saved":"None")),console.log(`- Board Filled: ${i||"None"}`)}if(window.pieces){console.log("=== Pieces Array Debug ==="),console.log(`Total piece types: ${window.pieces.length}`);let e=0;window.pieces.forEach(((t,n)=>{t.amount>0&&(e+=t.amount,console.log(`Piece #${n+1} (${function(e){switch(e){case 1:return"Level 60 (All classes)";case 2:return"Level 100 (All classes)";case 3:return"Level 140 Warrior/Pirate";case 4:return"Level 140 Mage/Thief/Archer";case 5:return"Level 200 Warrior";case 6:return"Level 200 Archer";case 7:return"Level 200 Thief/Lab";case 8:return"Level 200 Mage";case 9:return"Level 200 Pirate";case 10:return"Level 250 Warrior";case 11:return"Level 250 Archer";case 12:return"Level 250 Thief";case 13:return"Level 250 Mage";case 14:return"Level 250 Pirate";case 15:return"Level 250 Xenon";case 16:return"Level 200 Enhanced Lab";case 17:return"Level 250 Enhanced Lab";case 18:return"Level 250 Lab";default:return`Unknown piece type (${e})`}}(n+1)}):`),console.log(`  Amount: ${t.amount}`),console.log("  Shape:"),t.shape.forEach((e=>{let t="  ";e.forEach((e=>{t+=0===e?"â–¡ ":"â–  "})),console.log(t)})))})),console.log(`Total pieces used: ${e}`)}else console.log("Pieces array not found! The solver will not work correctly.")};class H{constructor(e,t,n){G(this,"pausePromise",void 0),G(this,"pauseResolve",void 0),G(this,"iterations",void 0),G(this,"directionFree",void 0),G(this,"success",void 0),G(this,"shouldStop",void 0),this.board=e,this.pieces=t,this.onBoardUpdated=n,this.iterations=0,this.pieceLength=t.length,this.valid=!0,this.pieceNumber=0,this.transformationNumber=0,this.restrictedPieceNumber=0,this.restrictedTransformationNumber=0,this.time=(new Date).getTime(),this.history=[],this.middle=[];for(let e=this.board.length/2-1;e<this.board.length/2+1;e++)for(let t=this.board[0].length/2-1;t<this.board[0].length/2+1;t++)-1!=this.board[e][t]&&this.middle.push(new g(t,e));this.emptySpots=[];for(let e=0;e<this.board.length;e++)for(let t=0;t<this.board[0].length;t++)0==this.board[e][t]&&this.emptySpots.push(new g(t,e));this.restrictedSpots=[];for(let e=0;e<this.board.length;e++)for(let t=0;t<this.board[0].length;t++)this.searchSurroundings(t,e);this.longSpaces=[];for(let e=0;e<this.board.length;e++)for(let t=0;t<this.board[0].length;t++)"horizontal"==this.checkLongSpace(t,e)&&this.longSpaces.push(new g(t,e)),"vertical"==this.checkLongSpace(t,e)&&this.longSpaces.push(new g(t,e));this.firstAlgorithm=!!this.longSpaces.length}async solve(){return this.pieces.sort(((e,t)=>t.amount*t.cellCount-e.amount*e.cellCount)),this.pieces.push(new m([[]],0,-1)),this.restrictedSpots.sort(((e,t)=>t.spotsFilled-e.spotsFilled)),this.time=(new Date).getTime(),this.success=await this.solveInternal(),this.success}async solveInternal(e=3e4){let t,n,o,r=[],a=0;for(;a<this.emptySpots.length&&0!=this.board[this.emptySpots[a].y][this.emptySpots[a].x];)a++;for(;this.pieces[0].amount>0||!this.valid;){if(this.shouldStop)return;if(this.valid&&0!=this.restrictedSpots.length&&this.pieces[this.restrictedPieceNumber].amount&&5!=this.directionFree&&!this.firstAlgorithm)this.restrictedPieceNumber!=this.pieceLength&&(o=this.restrictedSpots[0],n=this.pieces[this.restrictedPieceNumber].restrictedTransformations[this.restrictedTransformationNumber],this.determineDirectionFree(o),this.isPlaceable(o,n)?(r.push([0,0,this.takeFromList(this.restrictedPieceNumber),[...this.restrictedSpots],o,this.restrictedPieceNumber,this.restrictedTransformationNumber,this.directionFree,[],0,this.valid]),this.restrictedSpots.splice(0,1),this.placePiece(o,n),this.isValid(),this.restrictedPieceNumber=0,this.restrictedTransformationNumber=0):this.changeIndex(!0));else if(this.valid&&this.pieces[this.pieceNumber].amount&&(this.firstAlgorithm||0==this.restrictedSpots.length)&&5!=this.directionFree){if(this.directionFree=0,!this.firstAlgorithm)for(a=0;a<this.emptySpots.length&&0!=this.board[this.emptySpots[a].y][this.emptySpots[a].x];)a++;if(a==this.emptySpots.length)return!0;if(o=this.emptySpots[a],n=this.pieces[this.pieceNumber].transformations[this.transformationNumber],this.isPlaceable(o,n)){let e=[];for(let t=0;t<this.longSpaces.length;t++)e.push(this.longSpaces[t]);if(r.push([this.pieceNumber,this.transformationNumber,this.takeFromList(this.pieceNumber),[...this.restrictedSpots],o,0,0,0,e,a,this.valid]),this.placePiece(o,n),this.isValid(),this.firstAlgorithm){for(;a<this.emptySpots.length&&0!=this.board[this.emptySpots[a].y][this.emptySpots[a].x];)a++;if(a==this.emptySpots.length)return!0}this.pieceNumber=0,this.transformationNumber=0}else this.changeIndex(!1)}else{if(0==r.length)return!1;this.valid||(this.valid=!0),[this.pieceNumber,this.transformationNumber,t,this.restrictedSpots,o,this.restrictedPieceNumber,this.restrictedTransformationNumber,this.directionFree,this.longSpaces,a,this.valid]=r.pop(),0==this.directionFree?(this.returnToList(this.pieceNumber,t),this.takeBackPiece(o,this.pieces[this.pieceNumber].transformations[this.transformationNumber])):(this.returnToList(this.restrictedPieceNumber,t),this.takeBackPiece(o,this.pieces[this.restrictedPieceNumber].restrictedTransformations[this.restrictedTransformationNumber])),this.firstAlgorithm=!(0==this.longSpaces.length),this.firstAlgorithm?this.changeIndex(!1):this.changeIndex(0==!this.restrictedSpots.length)}this.iterations++,this.iterations%e==0&&(this.onBoardUpdated(),await new Promise((e=>setTimeout(e,0))),this.pausePromise&&await this.pausePromise)}return!0}takeFromList(e){this.pieces[e].amount--;let t=this.pieces[e],n=e+1;for(;t.amount*t.cellCount<this.pieces[n].amount*this.pieces[n].cellCount;)n++;return this.pieces[e]=this.pieces[n-1],this.pieces[n-1]=t,n-1-e}returnToList(e,t){let n=this.pieces[e];this.pieces[e]=this.pieces[e+t],this.pieces[e+t]=n,this.pieces[e].amount++}isValid(){if(0==this.middle.length)return!0;let e=0;for(let t of this.middle)this.board[t.y][t.x]>0&&this.board[t.y][t.x]<=this.pieceLength&&e++;this.valid=e!=this.middle.length}isPlaceable(e,t){if(!t)return!1;for(let n of t.pointShape){let o,r;if([o,r]=this.determinePoint(e,t,n),r>=this.board.length||r<0||o>=this.board[0].length||o<0||0!=this.board[r][o])return!1}return!0}placePiece(e,t){let n=[];this.history[this.history.length]=[];for(let o of t.pointShape){let r,a;[r,a]=this.determinePoint(e,t,o),o.isMiddle?this.board[a][r]=t.id+18:this.board[a][r]=t.id,n.push(new g(r,a)),this.history[this.history.length-1].push(new g(r,a));for(let e=0;e<this.restrictedSpots.length;e++)this.restrictedSpots[e].x==r&&this.restrictedSpots[e].y==a&&(this.restrictedSpots.splice(e,1),e--);for(let e=0;e<this.longSpaces.length;e++)this.longSpaces[e].x==r&&this.longSpaces[e].y==a&&(this.longSpaces.splice(e,1),e--);0==this.longSpaces.length&&(this.firstAlgorithm=!1)}for(let e of n)this.searchSurroundings(e.x,e.y+1),this.searchSurroundings(e.x,e.y-1),this.searchSurroundings(e.x+1,e.y),this.searchSurroundings(e.x-1,e.y);let o=[];for(let e=0;e<this.restrictedSpots.length-1;e++)for(let t=e+1;t<this.restrictedSpots.length;t++)this.restrictedSpots[e].x==this.restrictedSpots[t].x&&this.restrictedSpots[e].y==this.restrictedSpots[t].y&&o.push(e);for(let e=o.length-1;e>=0;e--)this.restrictedSpots.splice(o[e],1);this.restrictedSpots.sort(((e,t)=>t.spotsFilled-e.spotsFilled))}takeBackPiece(e,t){this.history.pop();for(let n of t.pointShape){let o,r;[o,r]=this.determinePoint(e,t,n),this.board[r][o]=0}}searchSurroundings(e,t){let n=0;this.board[t]&&0==this.board[t][e]&&(this.board[t+1]&&0==this.board[t+1][e]&&n++,this.board[t-1]&&0==this.board[t-1][e]&&n++,this.board[t]&&0==this.board[t][e+1]&&n++,this.board[t]&&0==this.board[t][e-1]&&n++,n<=1&&this.restrictedSpots.push(new K(e,t,4-n)))}checkLongSpace(e,t){return this.board[t+1]&&0==this.board[t+1][e]&&this.board[t-1]&&0==this.board[t-1][e]&&this.board[t]&&0!=this.board[t][e+1]&&this.board[t]&&0!=this.board[t][e-1]?"vertical":this.board[t+1]&&0!=this.board[t+1][e]&&this.board[t-1]&&0!=this.board[t-1][e]&&this.board[t]&&0==this.board[t][e+1]&&this.board[t]&&0==this.board[t][e-1]?"horizontal":void 0}changeIndex(e){e?this.restrictedTransformationNumber<this.pieces[this.restrictedPieceNumber].restrictedTransformations.length-1?this.restrictedTransformationNumber++:(this.restrictedPieceNumber++,this.restrictedTransformationNumber=0):this.transformationNumber<this.pieces[this.pieceNumber].transformations.length-1?this.transformationNumber++:(this.pieceNumber++,this.transformationNumber=0)}determineDirectionFree(e){this.board[e.y-1]&&0==this.board[e.y-1][e.x]?this.directionFree=1:this.board[e.y]&&0==this.board[e.y][e.x+1]?this.directionFree=2:this.board[e.y+1]&&0==this.board[e.y+1][e.x]?this.directionFree=3:this.board[e.y]&&0==this.board[e.y][e.x-1]?this.directionFree=4:this.directionFree=5}determinePoint(e,t,n){let o,r;return 0==this.directionFree||3==this.directionFree||5==this.directionFree?(o=e.x+n.x-t.offCenter,r=e.y+n.y):1==this.directionFree?(o=e.x-n.x+t.offCenter,r=e.y-n.y):2==this.directionFree?(o=e.x+n.y,r=e.y+n.x-t.offCenter):(o=e.x-n.y,r=e.y-n.x+t.offCenter),[o,r]}pause(){this.time-=(new Date).getTime(),0!=this.iterations&&(document.getElementById("iterations").style.visibility="visible",document.getElementById("iterationsValue").innerText=`${this.iterations}`,document.getElementById("time").style.visibility="visible",document.getElementById("timeValue").innerText=-this.time+"ms"),this.pausePromise=new Promise((e=>this.pauseResolve=e))}continue(){this.time+=(new Date).getTime(),document.getElementById("iterations").style.visibility="hidden",document.getElementById("time").style.visibility="hidden",this.pauseResolve(),this.pausePromise=null}stop(){this.shouldStop=!0}verifyPieceTransformations(e){if(e<0||e>=this.pieces.length)return!1;const t=this.pieces[e].transformations;console.log(`Piece #${e+1} has ${t.length} transformations`);for(let e=0;e<t.length;e++){const n=t[e].pointShape;console.log(`  Transformation #${e+1}: ${n.length} points`)}return t.length>0}}class K extends g{constructor(e,t,n){super(e,t),this.spotsFilled=n}}const X="legionBoard_preset_",Y="boardFilled_preset_",Z="legionSolver_activePreset";let Q=localStorage.getItem(Z)?parseInt(localStorage.getItem(Z)):1,ee=`${X}${Q}`,te=JSON.parse(localStorage.getItem(ee));if(te)console.log(`Loaded existing board for preset ${Q}`),localStorage.setItem("legionBoard",JSON.stringify(te));else{console.log(`Initializing new board for preset ${Q}`),te=[];for(let e=0;e<20;e++){te[e]=[];for(let t=0;t<22;t++)te[e][t]=-1}localStorage.setItem(ee,JSON.stringify(te)),localStorage.setItem("legionBoard",JSON.stringify(te))}let ne=`${Y}${Q}`,oe=localStorage.getItem(ne)?JSON.parse(localStorage.getItem(ne)):0;localStorage.setItem("boardFilled",JSON.stringify(oe)),document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("boardFilledValue");e&&(e.innerText=oe)}));let re=[],ae=[];const ie="start",le="running",ce="paused",se="completed";let de=ie;const ge=[];for(let e=0;e<16;e++)ge[e]=[];document.querySelector("#legionBoard tbody").innerHTML=te.map((e=>`<tr>${e.map((e=>'<td class="legionCell"></td>')).join("")}</tr>`)).join(""),we(),function(){for(let e=0;e<te.length/4;e++)for(let t=e;t<te.length/2;t++)ge[0].push(new g(t,e)),ge[1].push(new g(e,t+1)),ge[2].push(new g(e,te[0].length-2-t)),ge[3].push(new g(t,te[0].length-1-e)),ge[4].push(new g(te.length-1-t,te[0].length-1-e)),ge[5].push(new g(te.length-1-e,te[0].length-2-t)),ge[6].push(new g(te.length-1-e,t+1)),ge[7].push(new g(te.length-1-t,e));for(let e=te.length/4;e<te.length/2;e++)for(let t=e;t<te.length/2;t++)ge[8].push(new g(t,e)),ge[9].push(new g(e,t+1)),ge[10].push(new g(3*te.length/4-1-t,te.length/4+1+e)),ge[11].push(new g(t,te[0].length-1-e)),ge[12].push(new g(te.length-1-t,te[0].length-1-e)),ge[13].push(new g(t+te.length/4,e+te.length/4+1)),ge[14].push(new g(t+te.length/4,3*te.length/4-e)),ge[15].push(new g(te.length-t-1,e))}();for(let e=0;e<te.length;e++)for(let t=0;t<te[0].length;t++)0===te[e][t]&&oe++;localStorage.setItem(ne,JSON.stringify(oe)),document.getElementById("boardFilledValue").innerText=`${oe}`,window.updateBoardDisplay=function(){console.log("Updating board display"),Q=localStorage.getItem(Z)?parseInt(localStorage.getItem(Z)):1;const e=`${X}${Q}`,t=`${Y}${Q}`;let n=localStorage.getItem(e);if(n||(console.log(`No board state found for preset ${Q}, checking standard key`),n=localStorage.getItem("legionBoard")),n){te=JSON.parse(n),console.log(`Loaded board state for preset ${Q}`),localStorage.setItem("legionBoard",n),oe=0;for(let e=0;e<te.length;e++)for(let t=0;t<te[0].length;t++)0===te[e][t]&&oe++;localStorage.setItem(t,JSON.stringify(oe)),localStorage.setItem("boardFilled",JSON.stringify(oe));for(let e=0;e<te.length;e++)for(let t=0;t<te[0].length;t++){const n=ve(e,t);n&&(n.style.background=E.get(te[e][t]))}const e=document.getElementById("boardFilledValue");e&&(e.innerText=`${oe}`),we()}else{console.error("No board state found when updating display"),te=[];for(let e=0;e<20;e++){te[e]=[];for(let t=0;t<22;t++)te[e][t]=-1}oe=0,localStorage.setItem(e,JSON.stringify(te)),localStorage.setItem("legionBoard",JSON.stringify(te)),localStorage.setItem(t,JSON.stringify(0)),localStorage.setItem("boardFilled",JSON.stringify(0));const n=document.getElementById("boardFilledValue");n&&(n.innerText="0");for(let e=0;e<te.length;e++)for(let t=0;t<te[0].length;t++){const n=ve(e,t);n&&(n.style.background=E.get(te[e][t]))}we()}};let he=!1;localStorage.getItem("isBigClick")&&(document.getElementById("bigClick").checked=JSON.parse(localStorage.getItem("isBigClick")),JSON.parse(localStorage.getItem("isBigClick"))&&Le());let pe=!1;localStorage.getItem("isLiveSolve")&&(document.getElementById("liveSolve").checked=JSON.parse(localStorage.getItem("isLiveSolve")),JSON.parse(localStorage.getItem("isLiveSolve"))&&Ce()),document.getElementById("bigClick").addEventListener("click",Le),document.getElementById("liveSolve").addEventListener("click",Ce),document.getElementById("clearBoard").addEventListener("click",(function(){console.log(`Clearing board for preset ${Q}`),Q=localStorage.getItem(Z)?parseInt(localStorage.getItem(Z)):1;for(let e=0;e<te.length;e++)for(let t=0;t<te[0].length;t++){te[e][t]=-1;const n=ve(e,t);n&&(n.style.background=E.get(te[e][t]))}oe=0;const e=`${X}${Q}`,t=`${Y}${Q}`;localStorage.setItem(e,JSON.stringify(te)),localStorage.setItem("legionBoard",JSON.stringify(te)),localStorage.setItem(t,JSON.stringify(0)),localStorage.setItem("boardFilled",JSON.stringify(0));const n=document.getElementById("boardFilledValue");n&&(n.innerText="0"),we(),z(),console.log(`Board cleared for preset ${Q}`)})),document.getElementById("boardButton").addEventListener("click",(async function(e){switch(de){case ie:e.target.innerText=s("pause"),document.getElementById("clearBoard").disabled=!0,de=le,await async function(){if(0==oe&&currentPieces>0)return!1;console.log("Ensuring pieces array is updated before solving...");const e=document.querySelectorAll(".selectedPiece"),t={};console.log(`Found ${e.length} selected pieces:`),e.forEach((e=>{const n=e.querySelector(".characterName")?.textContent||"Unknown",o=e.querySelector(".characterLevel")?.textContent||"Unknown",r=e.getAttribute("data-character-class")||e.dataset.characterClass||"unknown",a=parseInt(e.getAttribute("data-piece-index")||e.dataset.pieceIndex)||0;console.log(`- ${n} (${r} ${o}): Using piece index ${a}`),t[a]=(t[a]||0)+1})),I.forEach((e=>{e&&"object"==typeof e&&(e.amount=0)})),console.log("Updating piece amounts and visualizing shapes:");for(const[e,n]of Object.entries(t)){const t=parseInt(e)-1;if(t>=0&&t<I.length&&I[t])if(I[t].amount=n,console.log(`Piece #${e} (amount: ${n}):`),I[t].shape){const e=[];if(I[t].shape.forEach((t=>{let n="  ";t.forEach((e=>{n+=0===e?"â–¡ ":1===e?"â–  ":"â–£ "})),e.push(n)})),console.log(e.join("\n")),I[t].pointShape){console.log(`  Point shape (${I[t].pointShape.length} points):`);const e=I[t].pointShape.map((e=>`    (${e.x},${e.y})${e.isMiddle?" [middle]":""}`)).join("\n");console.log(e)}}else console.warn(`  No shape defined for piece #${e}`);else console.warn(`Piece index ${e} (${t} in array) is out of range. Array length: ${I.length}`)}"function"==typeof window.updatePiecesForSolver&&window.updatePiecesForSolver(),console.log("========== SOLVER DEBUG =========="),console.log("Board filled spaces:",oe),console.log("Current pieces total:",currentPieces);let n=!1;if(I.forEach(((e,t)=>{e.amount>0&&(console.log(`Piece ${t+1} amount:`,e.amount),n=!0)})),!n)return console.error("No pieces were selected! Make sure pieces are being added correctly."),alert("No pieces were selected! Please select at least one character piece."),!1;let o=!1;for(let e=0;e<te.length;e++){for(let t=0;t<te[0].length;t++)if(0===te[e][t]){o=!0;break}if(o)break}if(!o)return console.error("No spaces were selected on the board! You need to fill in some spaces."),alert("No spaces were filled on the board! Click on the grid to fill some spaces."),!1;console.log("==================================");let r=[];for(let e=0;e<te.length;e++){r[e]=[];for(let t=0;t<te[0].length;t++)r[e][t]=te[te.length-1-e][te[0].length-1-t]}let a=[];for(let e=0;e<te[0].length;e++){a[e]=[];for(let t=0;t<te.length;t++)a[e][t]=te[te.length-t-1][e]}let i=[];for(let e=0;e<te[0].length;e++){i[e]=[];for(let t=0;t<te.length;t++)i[e][t]=te[t][te[0].length-1-e]}ae=[],re.push(new H(te,_.cloneDeep(I),Pe)),re.push(new H(a,_.cloneDeep(I),(()=>!1))),re.push(new H(r,_.cloneDeep(I),(()=>!1))),re.push(new H(i,_.cloneDeep(I),(()=>!1)));let l=0!=re[0].longSpaces.length;const c=re[0].solve();let s,d;if(l){const e=re[1].solve(),t=re[2].solve(),n=re[3].solve();s=await Promise.race([c,e,t,n])}else s=await c;for(let e of re)e.stop();if(void 0!==re[0].success){for(let e=0;e<re[0].board.length;e++)for(let t=0;t<re[0].board[0].length;t++)te[e][t]=re[0].board[e][t];d=re[0],ae=re[0].history}else if(void 0!==re[1].success){for(let e=0;e<re[1].board[0].length;e++)for(let t=0;t<re[1].board.length;t++)te[e][t]=re[1].board[t][re[1].board[0].length-1-e];for(let e of re[1].history)for(let t of e){let e=t.y;t.y=re[1].board[0].length-1-t.x,t.x=e}d=re[1],ae=re[1].history}else if(void 0!==re[2].success){for(let e=0;e<re[2].board.length;e++)for(let t=0;t<re[2].board[0].length;t++)te[e][t]=re[2].board[re[2].board.length-1-e][re[2].board[0].length-1-t];for(let e of re[2].history)for(let t of e)t.y=re[2].board.length-1-t.y,t.x=re[2].board[0].length-1-t.x;d=re[2],ae=re[2].history}else if(void 0!==re[3].success){for(let e=0;e<re[3].board[0].length;e++)for(let t=0;t<re[3].board.length;t++)te[e][t]=re[3].board[re[3].board.length-t-1][e];for(let e of re[3].history)for(let t of e){let e=t.x;t.x=re[3].board.length-1-t.y,t.y=e}d=re[3],ae=re[3].history}return document.getElementById("iterations").style.visibility="visible",document.getElementById("iterationsValue").innerText=`${d.iterations}`,document.getElementById("time").style.visibility="visible",document.getElementById("timeValue").innerText=(new Date).getTime()-d.time+"ms",s&&we(),s}()||(document.getElementById("failText").style.visibility="visible"),e.target.innerText=s("reset"),de=se;break;case le:e.target.innerText=s("continue");for(let e of re)e.pause();de=ce,document.getElementById("resetButton").style.visibility="visible";break;case ce:e.target.innerText=s("pause"),ae=[];for(let e of re)e.continue();de=le,document.getElementById("resetButton").style.visibility="hidden";break;case se:ke()}})),document.getElementById("resetButton").addEventListener("click",ke),document.getElementById("darkMode").addEventListener("click",Be);let ue,me=!1;for(let e=0;e<te.length;e++)for(let t=0;t<te[0].length;t++){let n=ve(e,t);n.addEventListener("mousedown",(()=>{ue=0==te[e][t]?-1:0,xe(e,t,ue),me=!0})),n.addEventListener("mouseover",(()=>{me?xe(e,t,ue):Se(e,t)})),n.addEventListener("mouseout",(()=>{me||Ie(e,t)}))}function fe(){for(let e=0;e<te.length;e++)for(let t=0;t<te[0].length;t++)ve(e,t).style.borderWidth="1px";for(let e=0;e<te[0].length/2;e++)ve(e,e).style.borderTopWidth="3px",ve(e,e).style.borderRightWidth="3px",ve(te.length-e-1,e).style.borderBottomWidth="3px",ve(te.length-e-1,e).style.borderRightWidth="3px",ve(e,te[0].length-e-1).style.borderTopWidth="3px",ve(e,te[0].length-e-1).style.borderLeftWidth="3px",ve(te.length-e-1,te[0].length-e-1).style.borderBottomWidth="3px",ve(te.length-e-1,te[0].length-e-1).style.borderLeftWidth="3px";for(let e=0;e<te.length;e++)ve(e,0).style.borderLeftWidth="3px",ve(e,te[0].length/2).style.borderLeftWidth="3px",ve(e,te[0].length-1).style.borderRightWidth="3px";for(let e=0;e<te[0].length;e++)ve(0,e).style.borderTopWidth="3px",ve(te.length/2,e).style.borderTopWidth="3px",ve(te.length-1,e).style.borderBottomWidth="3px";for(let e=te.length/4;e<3*te.length/4;e++)ve(e,Math.floor(te[0].length/4)).style.borderLeftWidth="3px",ve(e,Math.floor(3*te[0].length/4)).style.borderRightWidth="3px";for(let e=Math.ceil(te[0].length/4);e<Math.floor(3*te[0].length/4);e++)ve(te.length/4,e).style.borderTopWidth="3px",ve(3*te.length/4,e).style.borderTopWidth="3px"}document.documentElement.addEventListener("mouseup",(()=>{me=!1})),document.getElementById("legion").addEventListener("dragstart",(e=>e.preventDefault()));let be=!1;function ye(e,t){for(let n=0;n<ge.length;n++)for(let o of ge[n])if(o.x==e&&o.y==t)return n}function ve(e,t){return document.getElementById("legionBoard").getElementsByTagName("tr")[e].getElementsByTagName("td")[t]}function xe(e,t,n){if(de!=ie)return;if(he)if(0==n)for(let n of ge[ye(e,t)])ve(n.x,n.y).style.background=E.get(0),-1==te[n.x][n.y]&&oe++,te[n.x][n.y]=0;else for(let n of ge[ye(e,t)])ve(n.x,n.y).style.background=E.get(-1),0==te[n.x][n.y]&&oe--,te[n.x][n.y]=-1;else{let o=ve(e,t);-1==n?-1!=te[e][t]&&(te[e][t]=-1,o.style.background=E.get(-1),oe--):0!=te[e][t]&&(te[e][t]=0,o.style.background=E.get(0),oe++)}const o=`${X}${Q}`,r=`${Y}${Q}`;localStorage.setItem(o,JSON.stringify(te)),localStorage.setItem("legionBoard",JSON.stringify(te)),localStorage.setItem(r,JSON.stringify(oe)),localStorage.setItem("boardFilled",JSON.stringify(oe)),document.getElementById("boardFilledValue").innerText=`${oe}`,z()}function Se(e,t){if(de==ie)if(he)for(let n of ge[ye(e,t)])-1==te[n.x][n.y]?ve(n.x,n.y).style.background=be?"dimgrey":"silver":ve(n.x,n.y).style.background=be?"rgb(20, 20, 20)":"dimgrey";else-1==te[e][t]?ve(e,t).style.background=be?"dimgrey":"silver":ve(e,t).style.background=be?"rgb(20, 20, 20)":"dimgrey"}function Ie(e,t){if(de==ie)if(he)for(let n of ge[ye(e,t)])-1==te[n.x][n.y]?ve(n.x,n.y).style.background=E.get(-1):ve(n.x,n.y).style.background=E.get(0);else-1==te[e][t]?ve(e,t).style.background=E.get(-1):ve(e,t).style.background=E.get(0)}function we(){fe(),Ee()}function Ee(){document.getElementById("darkMode").checked?(E.set(-1,"#2a2a2a"),E.set(0,"#444")):(E.set(-1,"white"),E.set(0,"grey"));for(let e=0;e<te.length;e++)for(let t=0;t<te[0].length;t++)if(-1!=te[e][t]){let n=ve(e,t);ye(e,t),0==te[e][t]?n.style.background=E.get(0):te[e][t]>0&&(n.style.background=E.get(te[e][t]))}0==ae.length&&re[0]&&(ae=re[0].history);for(let e of ae)for(let t=0;t<e.length;t++){te[e[t].y][e[t].x-1]>0&&("3px"==ve(e[t].y,e[t].x).style.borderLeftWidth||"3px"==ve(e[t].y,e[t].x-1).style.borderRightWidth)&&(ve(e[t].y,e[t].x).style.borderLeftWidth="1px",ve(e[t].y,e[t].x-1).style.borderRightWidth="1px"),te[e[t].y-1]&&te[e[t].y-1][e[t].x]>0&&("3px"==ve(e[t].y,e[t].x).style.borderTopWidth||"3px"==ve(e[t].y-1,e[t].x).style.borderBottomWidth)&&(ve(e[t].y,e[t].x).style.borderTopWidth="1px",ve(e[t].y-1,e[t].x).style.borderBottomWidth="1px");for(let n=0;n<e.length;n++)t!=n&&e[t].x-1==e[n].x&&e[t].y==e[n].y&&(ve(e[t].y,e[t].x).style.borderLeftWidth="0px",te[0][e[t].x-1]&&(ve(e[t].y,e[t].x-1).style.borderRightWidth="0px")),t!=n&&e[t].x==e[n].x&&e[t].y-1==e[n].y&&(ve(e[t].y,e[t].x).style.borderTopWidth="0px",te[e[t].y-1]&&(ve(e[t].y-1,e[t].x).style.borderBottomWidth="0px"))}}function Be(){let e=document.getElementById("darkMode").checked;localStorage.setItem("isDarkMode",JSON.stringify(e)),e?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),Ee()}function Le(){he=!he,localStorage.setItem("isBigClick",JSON.stringify(he)),W()}function Ce(){pe=!pe,localStorage.setItem("isLiveSolve",JSON.stringify(pe)),pe&&de!=se&&we(),W()}function ke(){!function(){for(let e=0;e<re.length;e++)for(let t=0;t<re[e].board.length;t++)for(let n=0;n<re[e].board[0].length;n++)0==e?(ve(t,n).style.borderWidth="1px",re[e].board[t][n]>=0&&(ve(t,n).style.background=E.get(0),re[e].board[t][n]=0)):re[e].board[t][n]>=0&&(re[e].board[t][n]=0);fe(),re=[]}(),document.getElementById("clearBoard").disabled=!1,document.getElementById("boardButton").innerText=s("start"),document.getElementById("resetButton").style.visibility="hidden",document.getElementById("iterations").style.visibility="hidden",document.getElementById("time").style.visibility="hidden",document.getElementById("failText").style.visibility="hidden",ae=[],de=ie,W()}function Pe(){pe&&we()}localStorage.getItem("isDarkMode")&&(document.getElementById("darkMode").checked=JSON.parse(localStorage.getItem("isDarkMode")),JSON.parse(localStorage.getItem("isDarkMode"))&&Be()),document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=localStorage.getItem("isDarkMode");if(e){const t=JSON.parse(e);document.getElementById("darkMode").checked=t,t&&document.body.classList.add("dark-mode")}Ee()}()}));const $e="legionSolver_activePreset";let Te=localStorage.getItem($e)?parseInt(localStorage.getItem($e)):1;function De(){console.log("Setting up board state monitoring");let e=null,t=null;setInterval((()=>{const n=document.getElementById("boardButton"),o=n?n.innerText:null,r=localStorage.getItem("boardFilled"),a=document.getElementById("boardFilledValue");o&&o!==s("start")&&(null!==t&&t!==s("start")||(console.log(`Board state changed to ${o}, recording filled count: ${r}`),e=r),e&&(!r||0===parseInt(r)||parseInt(r)<.5*parseInt(e))?(console.log(`BoardFilled reset detected! Restoring from ${r} to ${e}`),localStorage.setItem("boardFilled",e),localStorage.setItem(`boardFilled_preset_${Te}`,e),a&&(a.innerText=JSON.parse(e)),z()):r&&parseInt(r)>0&&(e=r)),t=o}),500)}function Ne(e,t,n){if(!e||!e.shape)return console.error(`Cannot verify transformations for piece #${t+1} (${n}) - invalid piece or shape`),!1;const o=e.transformations;if(!o||0===o.length)return console.error(`Piece #${t+1} (${n}) has no transformations`),!1;console.log(`Piece #${t+1} (${n}) has ${o.length} unique orientations`);let r=!0;for(let e=0;e<o.length;e++){const n=o[e];if(!n.shape||!n.pointShape){console.error(`Transformation #${e+1} for piece #${t+1} is invalid`),r=!1;continue}const a=n.cellCount,i=n.pointShape.length;if(a!==i&&(console.error(`Transformation #${e+1} for piece #${t+1} has inconsistent cell count (${a}) and point count (${i})`),r=!1),e<2){const t=n.shape.map((e=>e.map((e=>0===e?"â–¡":1===e?"â– ":"â–£")).join(""))).join("\n");console.log(`Transformation #${e+1}:\n${t}`)}}return r}function Ae(){if(console.log("Updating pieces for solver"),window._isUpdatingPiecesForSolver)console.log("Already updating pieces for solver, preventing recursive call");else{window._isUpdatingPiecesForSolver=!0;try{Te=localStorage.getItem($e)?parseInt(localStorage.getItem($e)):1,P(),window._isSavingPreset||z()}finally{window._isUpdatingPiecesForSolver=!1}}}window.updatePiecesForSolver=Ae,window.monitorBoardState=De,document.addEventListener("DOMContentLoaded",(function(){console.log("DEBUG: DOMContentLoaded event fired");const e=document.getElementById("characterSelector"),t=document.querySelector(".filterContainer");console.log("DEBUG: DOM elements check - characterSelector:",!!e,"filterContainer:",!!t),console.log("DOM content loaded, initializing application"),console.log("DEBUG: About to call initCharacterSelector"),setTimeout((()=>{N()}),100),setTimeout((()=>{De()}),1e3),function(){if(console.log("Verifying piece shapes..."),!window.pieces||!Array.isArray(window.pieces))return void console.error("Pieces array not available for verification");const e=[{name:"Lvl 60 (All classes)",cells:1},{name:"Lvl 100 (All classes)",cells:2},{name:"Lvl 140 Warrior/Pirate",cells:3},{name:"Lvl 140 Mage/Thief/Archer",cells:3},{name:"Lvl 200 Warrior",cells:4},{name:"Lvl 200 Archer",cells:4},{name:"Lvl 200 Thief/Lab",cells:4},{name:"Lvl 200 Mage",cells:4},{name:"Lvl 200 Pirate",cells:4},{name:"Lvl 250 Warrior",cells:5},{name:"Lvl 250 Archer",cells:5},{name:"Lvl 250 Thief",cells:5},{name:"Lvl 250 Mage",cells:5},{name:"Lvl 250 Pirate",cells:5},{name:"Lvl 250 Xenon",cells:5}];let t=!0;window.pieces.length<e.length&&(console.error(`Pieces array has fewer items than expected: ${window.pieces.length} vs ${e.length}`),t=!1);for(let n=0;n<Math.min(window.pieces.length,e.length);n++){const o=window.pieces[n],r=e[n];if(!o.shape){console.error(`Piece #${n+1} (${r.name}) has no shape defined`),t=!1;continue}const a=o.cellCount;a!==r.cells&&(console.error(`Piece #${n+1} (${r.name}) has ${a} cells, expected ${r.cells}`),t=!1),Ne(o,n,r.name)}t?console.log("All piece shapes verified successfully"):console.warn("Some piece shapes have issues - the solver may not work correctly")}(),function(){const e=document.getElementById("boardButton");e&&(console.log("Setting up backup handler for board button"),e.addEventListener("click",(function(e){console.log("Board button clicked from main.js"),Ae()})));const t=document.getElementById("pieceSelectionContent");t&&(console.log("Setting up mutation observer for piece selection"),new MutationObserver((function(e){Ae()})).observe(t,{childList:!0}))}(),console.log("Application initialization complete")})),window.addEventListener("load",(function(){console.log("DEBUG: Window load event fired");const e=document.getElementById("characterSelector");e&&0===e.children.length&&(console.log("DEBUG: Character selector is empty, reinitializing"),N())}))}},e=>{e.O(0,[502],(()=>e(e.s=143))),e.O()}]);